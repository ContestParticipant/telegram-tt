"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[5806],{68292:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(13439),a=n(29807),r=n(87357),s=n(37836),c=n(30857),l=n(39351),d=n(73767);let u=0;const m=(0,s.Fe)((()=>{u=0})),p=(0,o.ph)((({text:e,className:t,isDisabled:n,ref:s})=>{const{isRtl:p}=(0,l.A)(),h=(0,d.A)(e),f=(0,c.A)(),g=!(!(!n&&(0,a.PKK)((0,i.mS)())&&void 0!==h&&h!==e)||u>=10||(0===u&&m(),u++,0)),A=(0,o.Kr)((()=>g?function(e,t){const n=[],i=e.length,a=t?.length??0;for(let r=0;r<=i;r++){const s=i-r,c=a-r;t&&c>=0&&e[s]!==t[c]?n.unshift(o.Ay.createElement("div",{className:"IYTzbS8o"},o.Ay.createElement("div",{className:"Jw1oQFdk"},e[s]??""),o.Ay.createElement("div",{className:"TZfEz3sc"},t[c]),o.Ay.createElement("div",{className:"Y9ied8_t"},e[s]??""))):n.unshift(o.Ay.createElement("span",null,e[s]??""))}return n}(e,h):e),[g,h,e]);return(0,o.vJ)((()=>{if(!g)return;const e=window.setTimeout((()=>{f()}),200);return()=>{window.clearTimeout(e)}}),[g,e]),o.Ay.createElement("span",{ref:s,className:(0,r.A)(t,!n&&"tgKbsVmz"),dir:p?"rtl":void 0},A)}))},79577:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(23174),a=n(90709),r=n(62587),s=n(64489);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}const l=(0,o.ph)((function(e){const{sticker:t,noLoad:n,forcePreview:l,...d}=e,u=t?.thumbnail?.dataUri,m=t&&(0,a.Mwy)(t,"full"),p=(0,r.A)(t?(0,a.Mwy)(t,"preview"):void 0,n&&!l,i.qZ.BlobUrl),h=(0,r.A)(m,n);return o.Ay.createElement(s.A,c({tgsUrl:h,previewUrl:p,thumbDataUri:u},d))}))},64489:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(87357),a=n(95807),r=n(37661),s=n(17712),c=n(83057),l=n(4438);const d="lM2usrZU";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(this,arguments)}const m=new Set,p=(0,o.ph)((function(e){const{previewUrl:t,thumbDataUri:n,className:p,...h}=e,[f,,g]=(0,r.A)(Boolean(n)),A=(0,c.A)(f),[y,v,E]=(0,r.A)(m.has(t)),C=(0,c.A)(y),[b,w]=(0,r.A)(!1),I=(0,s.A)((()=>{v(),m.add(t)})),N=(0,s.A)((()=>{g(),E(),setTimeout(w,300)})),{size:S}=e;return o.Ay.createElement("div",{className:(0,i.A)(p,"xCi2f0YH"),style:(0,a.A)(void 0!==S&&`width: ${S}px; height: ${S}px;`)},n&&!b&&o.Ay.createElement("img",{src:n,className:(0,i.A)(d,A),draggable:!1}),t&&!b&&o.Ay.createElement("img",{src:t,className:(0,i.A)(d,C),draggable:!1,onLoad:I}),o.Ay.createElement(l.A,u({},h,{onLoad:N})))}))},26875:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(87357),a=n(59030),r=n(21849);const s=(0,o.ph)((({peers:e,size:t,className:n,limit:s=3,badgeText:c})=>{const l=(0,a.A)(),d="number"==typeof t?t:r.R[t],u=(0,o.Kr)((()=>c||(!e?.length||e.length<=s?void 0:"+"+(e.length-s))),[c,e,s]);return o.Ay.createElement("div",{className:(0,i.A)(n,"kXs18Nmi"),style:`--_size: ${d}px;`,dir:l.isRtl?"rtl":"ltr"},e?.slice(0,s).map((e=>o.Ay.createElement(r.A,{size:t,peer:e,className:"XND8fhC1"}))),u&&o.Ay.createElement("div",{className:"SHyAyGFO"},u))}))},27860:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(66644),a=n(87357),r=n(45470),s=n(17712),c=n(50680);const l=(0,o.ph)((({isVisible:e,withAnimation:t,thumbDataUri:n,className:l,width:d,height:u})=>{const m=(0,o.li)(null),{shouldRender:p,transitionClassNames:h}=(0,c.A)(e,void 0,!0,!t&&void 0,void 0,500),f=(0,r.A)(n,!p,void 0,25,d,u),g=(0,s.A)((e=>{if(!m.current)return;const t=m.current,n=e.currentTarget.getBoundingClientRect(),o=e.clientX-n.left,a=e.clientY-n.top,r=o-n.width/2,s=a-n.height/2;(0,i.RK)((()=>{t.setAttribute("style",`--click-shift-x: ${r}px; --click-shift-y: ${s}px`)}))}));if(p)return o.Ay.createElement("div",{className:(0,a.A)("qF2WgYVg",h,l,t&&"pNM3cgkY"),ref:m,onClick:t?g:void 0},o.Ay.createElement("canvas",{ref:f,className:"eULqS2yR",width:d,height:u}),o.Ay.createElement("div",{className:"XBor45hE"}))}))},15535:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(31481),a=n(66644),r=n(87357),s=n(83868),c=n(82393),l=n(14737),d=n(43874),u=n(59030),m=n(64493),p=n(18276);const h=(0,o.ph)((({isLoading:e=!1,isPasswordVisible:t,error:n,hint:h,placeholder:f="Password",submitLabel:g="Next",description:A,shouldShowSubmit:y,shouldResetValue:v,shouldDisablePasswordManager:E=!1,noRipple:C=!1,clearError:b,onChangePasswordVisibility:w,onInputChange:I,onSubmit:N})=>{const S=(0,o.li)(null),x=(0,u.A)(),{isMobile:T}=(0,d.Ay)(),[P,k]=(0,o.J0)(""),[R,M]=(0,o.J0)(!1),L=T?550:400;return(0,o.vJ)((()=>{v&&k("")}),[v]),(0,l.A)((()=>{c.TF||S.current.focus()}),L),(0,o.vJ)((()=>{n&&(0,a.RK)((()=>{S.current.focus(),S.current.select()}))}),[n]),o.Ay.createElement("form",{action:"",onSubmit:N?function(t){t.preventDefault(),e||R&&N(P)}:s.A,autoComplete:"off"},o.Ay.createElement("div",{className:(0,r.A)("input-group password-input",P&&"touched",n&&"error"),dir:x.isRtl?"rtl":void 0},E&&o.Ay.createElement("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),o.Ay.createElement("input",{ref:S,className:"form-control",type:t?"text":"password",id:"sign-in-password",value:P||"",autoComplete:E?"one-time-code":"current-password",onChange:function(e){n&&b();const{target:t}=e;k(t.value),M(t.value.length>=i.AGC),I&&I(t.value)},maxLength:256,dir:"auto"}),o.Ay.createElement("label",null,n||h||f),o.Ay.createElement("div",{className:"div-button toggle-password",onClick:function(){w(!t)},role:"button",tabIndex:0,title:"Toggle password visibility","aria-label":"Toggle password visibility"},o.Ay.createElement(p.A,{name:t?"eye":"eye-closed"}))),A&&o.Ay.createElement("p",{className:"description"},A),N&&(R||y)&&o.Ay.createElement(m.A,{size:"smaller",type:"submit",ripple:!C,isLoading:e,disabled:!R},g))}))},10187:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(84051),i=n(13439),a=n(90709),r=n(70636),s=n(29807),c=n(87357),l=n(35049),d=n(59030),u=n(21849),m=n(34431),p=n(18276);const h=(0,o.ph)((0,i.EK)(((e,{peerId:t,forceShowSelf:n})=>{if(!t)return{};const o=(0,s.PVB)(e,t),i=(0,s.mBe)(e,t);return{peer:o,isSavedMessages:!n&&i&&i.isSelf}}))((({icon:e,title:t,isMinimized:n,canClose:i,isCloseNonDestructive:s,clickArg:h,peer:f,mockPeer:g,customPeer:A,className:y,isSavedMessages:v,withPeerColors:E,withEmojiStatus:C,onClick:b,itemClassName:w})=>{const I=(0,d.A)(),N=g||f,S=A||N,x=N&&(0,r.vj)(N)?N:void 0;let T,P,k;e&&t?(T=o.Ay.createElement("div",{className:"NtoGLT22"},o.Ay.createElement(p.A,{name:e,style:"f91Ad80i"})),P=t):S&&(T=o.Ay.createElement(u.A,{className:"La8BQ9yr",peer:S,size:"small",isSavedMessages:v}),k=(0,a.F9N)(I,S)||t,P=t||o.Ay.createElement(m.A,{peer:S,isSavedMessages:v,withEmojiStatus:C}));const R=(0,c.A)("_Lq6_4e5",(x?.isForum||A?.isAvatarSquare)&&"JIHfTUVn",n&&"UhOZvxvs",i&&"uvvgSFUJ",s&&"fAk5yEeV",!b&&"P8r3OoaX",E&&(0,l.y)(A||f),y);return o.Ay.createElement("div",{className:R,onClick:()=>b?.(h),title:n?k:void 0,dir:I.isRtl?"rtl":void 0},T,!n&&o.Ay.createElement("div",{className:(0,c.A)("XPVuH29G",w),dir:"auto"},P),i&&o.Ay.createElement("div",{className:"xVPG2UTy"},o.Ay.createElement(p.A,{name:"close"})))})))},20333:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(87357),a=n(95807),r=n(59030),s=n(93545),c=n(18276);const l="_b5HgBXr",d="P6mch4bB",u=(0,o.ph)((({leftText:e,rightText:t,floatingBadgeText:n,floatingBadgeIcon:u,progress:m,isPrimary:p,className:h})=>{const f=(0,r.A)(),g=(0,o.li)(null),A=(0,o.li)(null),[y,v]=(0,o.J0)(0),[E,C]=(0,o.J0)(0),b=()=>{if(g.current&&A.current&&void 0!==m){const e=g.current.offsetWidth,t=A.current.offsetWidth,n=e/2,o=t-e/2,i=m*t,a=Math.max(n,Math.min(i,o));let r;v(a/t),r=i<n?m*t/(2*n):i>o?.5+(m-o/t)/(1-o/t)*.4:.5,C(r)}};(0,o.vJ)(b,[m]),(0,s.A)(A,b);const w=Boolean(u||n),I=Boolean(m)&&m>.99;return o.Ay.createElement("div",{ref:A,className:(0,i.A)("nY2ggBsF",w&&"RYtVQAjM",p&&"Zi0w7QJ3",h),style:(0,a.A)(void 0!==m&&`--progress: ${m}`,void 0!==E&&`--tail-position: ${E}`,`--shift-x: ${y}`)},w&&o.Ay.createElement("div",{className:"dhigNjAq"},o.Ay.createElement("div",{className:"cOpfCGPh"},o.Ay.createElement("div",{className:"uNwBLNOy",ref:g},u&&o.Ay.createElement(c.A,{name:u,className:"MJ7MTmxi"}),n&&o.Ay.createElement("div",{className:"MwzZt3Qo",dir:f.isRtl?"rtl":void 0},n)),o.Ay.createElement("div",{className:"qRwO7SZm"},o.Ay.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},o.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"#7E85FF"}))))),o.Ay.createElement("div",{className:l},o.Ay.createElement("span",null,e)),o.Ay.createElement("div",{className:d},o.Ay.createElement("span",null,t)),o.Ay.createElement("div",{className:(0,i.A)("sZZV0yoe",I&&"m8ie8IxL")},o.Ay.createElement("div",{className:l},o.Ay.createElement("span",null,e)),o.Ay.createElement("div",{className:d},o.Ay.createElement("span",null,t))))}))},76453:(e,t,n)=>{n.d(t,{A:()=>E});var o=n(84051),i=n(13439),a=n(87357),r=n(80140),s=n(82393),c=n(54464),l=n(86974),d=n(10722),u=n(5912),m=n(17712),p=n(59030),h=n(64493),f=n(71429),g=n(24433),A=n(18276),y=n(82855);const v=[{title:"SetTimeoutFor.Hours",value:1,arg:3600},{title:"SetTimeoutFor.Hours",value:2,arg:7200},{title:"SetTimeoutFor.Hours",value:8,arg:28800},{title:"SetTimeoutFor.Days",value:1,arg:86400},{title:"SetTimeoutFor.Days",value:2,arg:172800}],E=(0,o.ph)((({sticker:e,size:t,noPlay:n,title:E,className:C,noContextMenu:b,isSavedMessages:w,isStatusPicker:I,canViewSet:N,observeIntersection:S,observeIntersectionForShowing:x,isSelected:T,isCurrentUserPremium:P,shouldIgnorePremium:k,noShowPremium:R,sharedCanvasRef:M,withTranslucentThumb:L,forcePlayback:U,onClick:j,clickArg:O,onFaveClick:F,onUnfaveClick:B,onRemoveRecentClick:D,onContextMenuOpen:K,onContextMenuClose:H,onContextMenuClick:z,isEffectEmoji:G})=>{const{openStickerSet:$,openPremiumModal:V,setEmojiStatus:J}=(0,i.ko)(),q=(0,o.li)(null),_=(0,o.li)(null),W=(0,p.A)(),Y=e.shouldUseTextColor,Z=(0,l.A)(q,!Y),{id:Q,stickerSetInfo:X}=e,ee=!e.isFree&&G||e.hasEffect,te=e.isCustomEmoji||G,ne=!P&&ee&&!k,oe=(0,u.Vz)(q,S),ie=oe,ae=oe&&!n,re=(0,u.Vz)(q,x),{isContextMenuOpen:se,contextMenuAnchor:ce,handleBeforeContextMenu:le,handleContextMenu:de,handleContextMenuClose:ue,handleContextMenuHide:me}=(0,d.A)(q),pe=Boolean(!b&&ce),he=(0,m.A)((()=>q.current)),fe=(0,m.A)((()=>q.current.closest(".custom-scroll, .no-scrollbar"))),ge=(0,m.A)((()=>I?_.current:q.current.querySelector(".sticker-context-menu .bubble"))),Ae=(0,m.A)((()=>({withPortal:I,shouldAvoidNegativePosition:!0})));(0,o.vJ)((()=>{se?K?.():H?.()}),[se,H,K]),(0,o.vJ)((()=>{oe||ue()}),[ue,oe]);const ye=(0,m.A)((t=>{t.stopPropagation(),t.preventDefault(),D(e)})),ve=(0,m.A)((()=>{D(e)})),Ee=(0,m.A)((()=>{B(e)})),Ce=(0,m.A)((()=>{F(e)})),be=(0,m.A)((()=>{j?.(O,!0)})),we=(0,m.A)((()=>{j?.(O,void 0,!0)})),Ie=(0,m.A)((()=>{$({stickerSetInfo:X})})),Ne=(0,m.A)(((t,n=0)=>{t.preventDefault(),t.stopPropagation(),ue(),z?.(),J({emojiStatusId:e.id,expires:(0,r.Fm)()+n})})),Se=!s.TF&&D,xe=(0,a.A)("StickerButton",j&&"interactive",T&&"selected",te&&"custom-emoji",G&&"effect-emoji",C),Te=(0,o.Kr)((()=>{if(!pe||b||te&&!I)return[];const e=[];return te?(v.forEach((t=>{e.push(o.Ay.createElement(g.A,{onClick:Ne,clickArg:t.arg},W(t.title,t.value,"i")))})),e):(B&&e.push(o.Ay.createElement(g.A,{icon:"favorite",onClick:Ee},W("Stickers.RemoveFromFavorites"))),F&&e.push(o.Ay.createElement(g.A,{icon:"favorite",onClick:Ce},W("Stickers.AddToFavorites"))),!ne&&j&&(w||e.push(o.Ay.createElement(g.A,{onClick:be,icon:"muted"},W("SendWithoutSound"))),e.push(o.Ay.createElement(g.A,{onClick:we,icon:"calendar"},W(w?"SetReminder":"ScheduleMessage")))),N&&e.push(o.Ay.createElement(g.A,{onClick:Ie,icon:"stickers"},W("ViewPackPreview"))),D&&e.push(o.Ay.createElement(g.A,{icon:"delete",onClick:ve},W("DeleteFromRecent"))),e)}),[pe,b,te,I,B,F,ne,j,N,D,Ne,W,Ee,Ce,w,we,be,Ie,ve]);return o.Ay.createElement("div",{ref:q,className:xe,title:E||e?.emoji,"data-sticker-id":Q,onMouseDown:e=>{(0,c.u)(e),le(e)},onClick:()=>{se||(ne?V(G?{initialSection:"effects"}:{initialSection:"premium_stickers"}):j?.(O))},onContextMenu:de},re&&o.Ay.createElement(y.A,{containerRef:q,sticker:e,isSmall:!0,size:t,shouldLoop:!0,shouldPreloadPreview:!0,noLoad:!ie,noPlay:!ae,noVideoOnMobile:!0,withSharedAnimation:!0,sharedCanvasRef:M,withTranslucentThumb:L,customColor:Z,forceAlways:U}),!R&&ne&&o.Ay.createElement("div",{className:"sticker-locked"},o.Ay.createElement(A.A,{name:"lock-badge"})),!R&&ee&&!ne&&o.Ay.createElement("div",{className:"sticker-premium"},o.Ay.createElement(A.A,{name:"star"})),Se&&o.Ay.createElement(h.A,{className:"sticker-remove-button",color:"dark",round:!0,noFastClick:!0,onClick:ye},o.Ay.createElement(A.A,{name:"close"})),Boolean(Te.length)&&o.Ay.createElement(f.A,{ref:_,isOpen:se,anchor:ce,getTriggerElement:he,getRootElement:fe,getMenuElement:ge,getLayout:Ae,className:"sticker-context-menu",autoClose:!0,withPortal:I,onClose:ue,onCloseAnimationEnd:me},Te))}))},87049:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(13439),a=n(29807),r=n(87357),s=n(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"},l={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]]},d=new Set(Object.keys(l)),u=(0,o.ph)((0,i.EK)((e=>({theme:(0,a.SJA)(e)})))((({text:e,color:t,className:n,theme:i})=>{const a=`svg-${(0,s.A)()}`,u=d.has(t)?t:void 0,m=u?l[u]["dark"===i?1:0]:void 0,p=m?m[0]:t,h=m?m[1]:t;return o.Ay.createElement("div",{className:(0,r.A)(c.root,n)},o.Ay.createElement("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},o.Ay.createElement("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${a})`}),o.Ay.createElement("defs",null,o.Ay.createElement("linearGradient",{id:a,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse"},o.Ay.createElement("stop",{"stop-color":p}),o.Ay.createElement("stop",{offset:"1","stop-color":h})))),o.Ay.createElement("div",{className:c.text},e))})))},66833:(e,t,n)=>{function o(e){return"starGift"===e.type?e.sticker:e.attributes.find((e=>"model"===e.type))?.sticker}function i(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function a(e){if("starGiftUnique"===e.type)return function(e){const t=e.find((e=>"model"===e.type)),n=e.find((e=>"backdrop"===e.type)),o=e.find((e=>"pattern"===e.type));return{model:t,originalDetails:e.find((e=>"originalDetails"===e.type)),pattern:o,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>i,uc:()=>a,yQ:()=>o})},79582:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(13439),i=n(29807),a=n(87894);const r=3e9,s=3e8;function c(e,t=!1,n,c){const l=(0,o.mS)();return(0,a.My)(e,(e=>{if(e===c)return 1/0;const o=(0,i.hds)(l,e);if(!o)return 0;let a=0;const d=(0,i.yHC)(l,e);return d&&(a+=d.date),t&&o.isVerified&&(a+=r),n&&n.includes(e)&&(a=Date.now()+s+(n.length-n.indexOf(e))),a}),"desc")}},49992:(e,t,n)=>{n.d(t,{e:()=>i});var o=n(84051);function i(e=""){const[t,n]=(0,o.Ul)(e),[i,a]=(0,o.J0)(!1),[r,s]=(0,o.Ul)(e);return{getHtml:t,setHtml:(0,o.hb)((e=>{e||a((e=>!e)),s(e)}),[s,a]),overwrite:i,htmlOverwrite:r,originalSetHtml:n}}},97374:(e,t,n)=>{n.d(t,{I:()=>s});var o=n(84051),i=n(13439),a=n(17712),r=n(59030);function s(){const e=(0,r.A)(),{showNotification:t}=(0,i.ko)(),n=(0,o.li)(0),{currentUserId:s}=(0,i.PC)((e=>({currentUserId:e.currentUserId})));return(0,a.A)((()=>{const o=n.current;t(o?{message:e("UnlockPremiumEmojiHint2"),action:{action:"openChat",payload:{id:s,shouldReplaceHistory:!0}},actionText:e("Open")}:{message:e("UnlockPremiumEmojiHint"),action:{action:"openPremiumModal",payload:{initialSection:"animated_emoji"}},actionText:e("PremiumMore")}),n.current=Number(!o)}))}},54960:(e,t,n)=>{n.d(t,{A:()=>T});var o=n(84051),i=n(13439),a=n(31481),r=n(66644),s=n(90709),c=n(70636),l=n(29807),d=n(87357),u=n(87894),m=n(79824),p=n(96374),h=n(17712),f=n(59030),g=n(19806),A=n(46222),y=n(40664),v=n(52745),E=n(24956),C=n(21849),b=n(34431),w=n(18276),I=n(10187),N=n(45780),S=n(31722);const x="PeerPickerItem",T=(0,o.ph)((({className:e,categories:t,itemIds:n,categoryPlaceholderKey:T,filterValue:P,filterPlaceholder:k,notFoundText:R,searchInputId:M,itemClassName:L,isLoading:U,noScrollRestore:j,isSearchable:O,lockedUnselectedSubtitle:F,forceShowSelf:B,isViewOnly:D,itemInputType:K,withStatus:H,withPeerTypes:z,withDefaultPadding:G,onFilterChange:$,onDisabledClick:V,onLoadMore:J,...q})=>{const _=(0,f.A)(),W=q.allowMultiple,Y=W?q.lockedSelectedIds:void 0,Z=W?q.lockedUnselectedIds:void 0,Q=(0,o.Kr)((()=>W?q.selectedCategories:q.selectedCategory?[q.selectedCategory]:m.p),[W,q.selectedCategory,q.selectedCategories]),X=(0,o.Kr)((()=>W?q.selectedIds:q.selectedId?[q.selectedId]:m.p),[W,q.selectedId,q.selectedIds]),ee=(0,o.li)(null),te=X.length>10;(0,o.vJ)((()=>{if(!O)return;const e=window.setTimeout((()=>{(0,r.YS)((()=>{ee.current?.focus()}))}),500);return()=>{window.clearTimeout(e)}}),[O]);const ne=(0,o.Kr)((()=>new Set(Y)),[Y]),oe=(0,o.Kr)((()=>new Set(Z)),[Z]),ie=(0,o.Kr)((()=>X.filter((e=>!ne.has(e)))),[ne,X]),ae=(0,o.Kr)((()=>t?(0,u.dU)(t,"type"):{}),[t]),re=(0,o.Kr)((()=>{if(P)return n;const e=[],t=[],o=[];return n.forEach((n=>{ne.has(n)?e.push(n):oe.has(n)?o.push(n):t.push(n)})),e.concat(t,o)}),[P,n,ne,oe]),se=(0,h.A)((e=>{if(ne.has(e))V?.(e,!0);else if(oe.has(e))V?.(e,!1);else{if(W&&ae[e]){const t=ae[e].type,n=Q?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void q.onSelectedCategoriesChange?.(n)}if(W){const t=X.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void q.onSelectedIdsChange?.(t)}ae[e]?q.onSelectedCategoryChange?.(ae[e].type):q.onSelectedIdChange?.(e)}})),ce=(0,h.A)((e=>{const{value:t}=e.currentTarget;$?.(t)})),[le,de]=(0,p.A)(J,re,Boolean(P)),ue=(0,o.hb)(((e,t)=>{const n=(0,i.mS)(),r=t?ae[e]:void 0,u=t?void 0:(0,l.PVB)(n,e),m=u||r;if(!m)return a.Oig?o.Ay.createElement("div",{key:e},"No peer or category with ID ",e):void 0;const p=u&&!(0,c.vj)(u)?u.isSelf&&!B:void 0,h=oe.has(e),f=ne.has(e),A=h||f,y=r?Q?.includes(r.type):X.includes(e),[v,I]=function(){if(h)return[F];if(H&&u){if((0,c.vj)(u))return[(0,s.sTh)(_,u)];const e=(0,l.K0y)(n,u.id);return[(0,s.CDb)(_,u,e),(0,d.A)((0,s.PFE)(u,e,!0)&&S.A.onlineStatus)]}if(z&&u){const e=(0,c.cy)(u);return e&&[_(e)]}}()||[];return o.Ay.createElement(N.A,{key:e,className:(0,d.A)(x,L),title:o.Ay.createElement(b.A,{peer:m}),avatarElement:o.Ay.createElement(C.A,{peer:u||r,isSavedMessages:p,size:"medium"}),subtitle:v,subtitleClassName:I,disabled:A,inactive:D,ripple:!0,inputElement:A?o.Ay.createElement(w.A,{name:"lock-badge"}):"radio"===K?o.Ay.createElement(E.A,{checked:y,disabled:A,onlyInput:!0}):"checkbox"===K?o.Ay.createElement(g.A,{checked:y,disabled:A,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>se(e),onDisabledClick:V&&(()=>V(e,f))})}),[ae,B,D,L,K,_,ne,oe,F,V,Q,X,z,H]),me=(0,o.Kr)((()=>{if(t?.length)return o.Ay.createElement("div",{key:"categories"},T&&o.Ay.createElement("div",{className:S.A.pickerCategoryTitle},_(T)),t?.map((e=>ue(e.type,!0))),o.Ay.createElement("div",{className:S.A.pickerCategoryTitle},_("FilterChats")))}),[t,T,_,ue]);return o.Ay.createElement("div",{className:(0,d.A)(S.A.container,e)},O&&o.Ay.createElement("div",{className:(0,d.A)(S.A.header,"custom-scroll"),dir:_.isRtl?"rtl":void 0},Q?.map((e=>o.Ay.createElement(I.A,{className:S.A.peerChip,customPeer:ae[e],onClick:se,clickArg:e,canClose:!0}))),Y?.map(((e,t)=>o.Ay.createElement(I.A,{className:S.A.peerChip,peerId:e,isMinimized:te&&t<X.length-5,forceShowSelf:B,onClick:se,clickArg:e}))),ie.map(((e,t)=>o.Ay.createElement(I.A,{className:S.A.peerChip,peerId:e,isMinimized:te&&t+(Y?.length||0)<X.length-5,canClose:!0,onClick:se,clickArg:e}))),o.Ay.createElement(y.A,{id:M,ref:ee,value:P,onChange:ce,placeholder:k||_("SelectChat")})),le?.length?o.Ay.createElement(A.A,{className:(0,d.A)(S.A.pickerList,G&&S.A.padded,"custom-scroll"),items:le,itemSelector:`.${x}`,beforeChildren:me,onLoadMore:de,noScrollRestore:j},le.map((e=>ue(e)))):U||!le||le.length?o.Ay.createElement(v.A,null):o.Ay.createElement("p",{className:S.A.noResults},R||"Sorry, nothing found."))}))},45780:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(87357),a=n(82393),r=n(17712),s=n(59030),c=n(42452);const l=({title:e,subtitle:t,avatarElement:n,inputElement:l,inputPosition:d="start",disabled:u,inactive:m,ripple:p,className:h,titleClassName:f,subtitleClassName:g,style:A,onClick:y,onDisabledClick:v})=>{const E=(0,s.A)(),C=!m&&!u,b=(0,r.A)((()=>{m||(u?v?.():y?.())}));return o.Ay.createElement("div",{className:(0,i.A)("OHkx_W75",t&&"neXqB2_A",u&&"tvZeVJPh",C&&"VUSwo4t5",n&&"dMT9byM6",h),onClick:b,style:A,dir:E.isRtl?"rtl":void 0,role:C?"button":void 0,tabIndex:C?0:void 0},!u&&!m&&p&&o.Ay.createElement(c.A,null),l&&o.Ay.createElement("div",{className:(0,i.A)("kmjqObdP","end"===d?"iqGhSQGm":"F0Hv3EQm")},l),n&&o.Ay.createElement("div",{className:"dnAaRPCo"},n),o.Ay.createElement("div",{className:(0,i.A)("JSSC0N8V",f)},e),t&&o.Ay.createElement("div",{className:(0,i.A)("OYmzCSp2",g)},t),!l&&a.pz&&o.Ay.createElement("div",{className:"P53DrbWA"}))}},40558:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(84051),i=n(66644),a=n(90709),r=n(87357),s=n(95807),c=n(87679),l=n(17712),d=n(62587),u=n(93545),m=n(38691);const p=(0,o.ph)((({backgroundColors:e,patternColor:t,patternIcon:n,clearBottomSector:p,className:h})=>{const f=(0,o.li)(null),g=(0,o.li)(null),[A,y]=(0,o.Ul)({width:0,height:0}),v=(0,m.A)(),[E,C]=(0,o.J0)(),b=n&&(0,a.Mwy)(n,"preview"),w=(0,d.A)(b);(0,o.vJ)((()=>{w&&(0,c.NN)(w).then(C)}),[w]);const I=(0,o.Kr)((()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),o=t/3,i=.05+(.4-.05)*o,a=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const r=t/n*Math.PI*2+a;if(p&&r>.45*Math.PI&&r<.55*Math.PI)continue;const s=.5+1.71*i*Math.cos(r),c=.5+i*Math.sin(r),l=1.4-o*Math.random();e.push({x:s,y:c,sizeFactor:l})}}return e}),[p]);(0,u.A)(f,(e=>{y({width:e.contentRect.width,height:e.contentRect.height})})),(0,o.vJ)((()=>{const e=f.current;e&&y({width:e.clientWidth,height:e.clientHeight})}),[y]);const N=(0,l.A)((()=>{const e=g.current;if(!e||!E)return;const n=e.getContext("2d"),{width:o,height:i}=e;if(!o||!i)return;n.save(),I.forEach((({x:e,y:t,sizeFactor:a})=>{const r=(o-Math.max(o,250*v))/2,s=e*Math.max(o,250*v)+r,c=t*Math.max(i,250*v)+r,l=20*v*a*(r?.8:1);n.drawImage(E,s-l/2,c-l/2,l,l)})),n.restore(),t&&(n.save(),n.fillStyle=t,n.globalCompositeOperation="source-atop",n.fillRect(0,0,o,i),n.restore());const a=n.createRadialGradient(o/2,i/2,0,o/2,i/2,o/2);a.addColorStop(0,"#FFFFFF77"),a.addColorStop(1,"#FFFFFF"),n.save(),n.globalCompositeOperation="destination-out",n.fillStyle=a,n.fillRect(0,0,o,i),n.restore()}));return(0,o.vJ)((()=>{N()}),[E]),(0,o.vJ)((()=>{const{width:e,height:t}=A(),n=g.current;if(!e||!t)return;const o=Math.max(e,t);(0,i.RK)((()=>{n.width=o*v,n.height=o*v,N()}))}),[A,v]),o.Ay.createElement("div",{ref:f,className:(0,r.A)("Af3tYFMg",h),style:(0,s.A)(`--_bg-1: ${e[0]}`,`--_bg-2: ${e[1]||e[0]}`)},o.Ay.createElement("canvas",{className:"GbpiDSS_",ref:g}))}))},83594:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(90709),a=n(87357),r=n(95807),s=n(82393),c=n(62587),l=n(87412);const d="PZAuNVZH",u=(0,o.ph)((({reaction:e,isLottie:t,className:n,particleSize:u,onEnded:m})=>{const p=(0,i.aLQ)(e.documentId,!0),h=(0,c.A)(t?void 0:p),f=(0,o.Kr)((()=>s.ol?Array.from({length:7}).map((()=>function(e=20){const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(u))):[]),[u]);if(h||t)return o.Ay.createElement("div",{className:(0,a.A)("aInga6VW",n),style:(0,r.A)(Boolean(u)&&`--particle-size: ${u}px`)},f.map(((n,i)=>{const a=`--offset-path: path('${n}');`;return t?o.Ay.createElement(l.A,{documentId:e.documentId,className:d,style:a,withSharedAnimation:!0,size:u,onAnimationEnd:0===i?m:void 0}):o.Ay.createElement("img",{src:h,alt:"",className:d,style:a,draggable:!1,onAnimationEnd:0===i?m:void 0})})))}))},11241:(e,t,n)=>{n.d(t,{A:()=>I});var o=n(84051),i=n(13439),a=n(90709),r=n(29807),s=n(87357),c=n(43336),l=n(76023),d=n(37661),u=n(5912),m=n(17712),p=n(62587),h=n(50680),f=n(47483),g=n(18104),A=n(87412),y=n(83594),v=n(17794),E=n(93879);const C=1.5*l.$,b=6.5*l.$,w=l.$,I=(0,o.ph)((0,i.EK)(((e,{containerId:t})=>{const{genericEmojiEffects:n,reactions:o}=e,{activeReactions:i}=(0,r.nTw)(e),a=(0,r.xYJ)(e,"reactionEffects");return{activeReactions:i?.[t],availableReactions:o.availableReactions,genericEffects:n,withEffects:a}}))((({containerId:e,reaction:t,className:n,size:r=C,effectSize:l=b,activeReactions:I,availableReactions:N,genericEffects:S,withEffects:x,withEffectOnly:T,shouldPause:P,shouldLoop:k,loopLimit:R,observeIntersection:M})=>{const{stopActiveReaction:L}=(0,i.ko)(),U=(0,o.li)(null),j="custom"===t.type,O=(0,o.Kr)((()=>N?.find((e=>(0,a.a0K)(e.reaction,t)))),[N,t]),F=O?.centerIcon?.id,{customEmoji:B}=(0,f.A)(j?t.documentId:void 0),D=(0,o.Kr)((()=>{if(!j)return O?.aroundAnimation?.id;if(!B)return;const e=N?.find((e=>e.reaction.emoticon===B.emoji))?.aroundAnimation?.id;return e}),[O,N,B,j]),K=(0,o.Kr)((()=>{if(D)return D;if(!S?.stickers)return;const{stickers:e}=S;return e[Math.floor(Math.random()*e.length)].id}),[D,S]),H=(0,u.Vz)(U,M),z=F&&(0,a.aLQ)(F),G=K&&(0,a.aLQ)(K),$=(0,p.A)(z),V=(0,p.A)(G),J=(0,o.Kr)((()=>I?.find((e=>(0,a.a0K)(e,t)))),[I,t]),q=Boolean(x&&J&&(j||$)&&V),_=H&&(q&&!T||k),{shouldRender:W,transitionClassNames:Y}=(0,h.A)(q,void 0,!0,"slow"),{shouldRender:Z,transitionClassNames:Q}=(0,h.A)(_,void 0,!0,"slow"),X=(0,m.A)((()=>{L({containerId:e,reaction:t})})),[ee,te,ne]=(0,d.A)(),oe=!(j||_&&ee),{shouldRender:ie,transitionClassNames:ae}=(0,h.A)(oe,void 0,!0),re=(0,s.A)(E.A.root,W&&E.A.animating,T&&E.A.withEffectOnly,n);return o.Ay.createElement("div",{className:re,ref:U},!T&&ie&&o.Ay.createElement(v.A,{className:ae,reaction:t,availableReactions:N,size:r,observeIntersection:M}),!T&&j&&o.Ay.createElement(A.A,{documentId:t.documentId,className:E.A.customEmoji,size:r,noPlay:P,noVideoOnMobile:!0,loopLimit:R,observeIntersectionForPlaying:M,forceAlways:!0}),Z&&!j&&o.Ay.createElement(g.A,{key:`${F}-${r}`,className:(0,s.A)(E.A.animatedIcon,Q),size:(0,c.Ki)(1.9*r),tgsUrl:$,play:H&&!P,noLoop:!k,onLoad:te,onEnded:ne,forceAlways:!0}),W&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(g.A,{key:`${K}-${l}`,className:(0,s.A)(E.A.effect,Y),size:l,tgsUrl:V,play:H,noLoop:!0,onEnded:X,forceAlways:!0}),j&&!D&&H&&o.Ay.createElement(y.A,{reaction:t,className:Y,particleSize:Math.max(.5*r,w),onEnded:X})))})))},17794:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(84051),i=n(90709),a=n(87357),r=n(62587),s=n(83057),c=n(87412),l=n(18276),d=n(61911);const u=(0,o.ph)((({reaction:e,availableReactions:t,className:n,size:u,withIconHeart:m,observeIntersection:p})=>{const h=(0,o.Kr)((()=>t?.find((t=>(0,i.a0K)(t.reaction,e)))),[t,e]),f=h?.staticIcon?.id,g=f?`document${f}`:void 0,A=(0,r.A)(g),y=(0,s.A)(A),v="emoji"===e.type&&"🦄"===e.emoticon,E=m&&"emoji"===e.type&&"❤"===e.emoticon;return"custom"===e.type?o.Ay.createElement(c.A,{documentId:e.documentId,className:(0,a.A)("ReactionStaticEmoji",n),size:u,observeIntersectionForPlaying:p}):E?o.Ay.createElement(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${u}px; width: ${u}px`}):o.Ay.createElement("img",{className:(0,a.A)("ReactionStaticEmoji",v&&"with-unicorn-fix",y,n),style:u?`width: ${u}px; height: ${u}px`:void 0,src:A||d,alt:h?.title,draggable:!1})}))},60148:(e,t,n)=>{n.d(t,{A:()=>d,V:()=>u});var o=n(84051),i=n(37836);function a(e,t,n){const o=e.createShader(n);return e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS),o}function r(e,t){for(;t.length<4;)t.push("#88b884");const n=new Array;for(const e of t)n.push(((o=e).startsWith("#")&&(o=o.slice(1)),[parseInt(o.slice(0,2),16),parseInt(o.slice(2,4),16),parseInt(o.slice(4,6),16)]));var o;const r=e.getContext("webgl");if(!r)throw new Error("WebGL not supported");const c=r.createProgram();if(!c)throw new Error("Unable to create WebGLProgram");const l=function(e,t){const[n,o]=t;return[a(e,n,e.VERTEX_SHADER),a(e,o,e.FRAGMENT_SHADER)]}(r,["// an attribute will receive data from a buffer\nattribute vec4 a_position;\n\n// all shaders have a main function\nvoid main() {\n\n  // gl_Position is a special variable a vertex shader\n  // is responsible for setting\n  gl_Position = a_position;\n}\n","precision highp float;\n\nuniform vec2 resolution;\n\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\nuniform vec3 color4;\n\nuniform vec2 color1Pos;\nuniform vec2 color2Pos;\nuniform vec2 color3Pos;\nuniform vec2 color4Pos;\n\nvoid main() {\n  vec2 position = gl_FragCoord.xy / resolution.xy;\n  position.y = 1.0 - position.y;\n\n  float dp1 = distance(position, color1Pos);\n  float dp2 = distance(position, color2Pos);\n  float dp3 = distance(position, color3Pos);\n  float dp4 = distance(position, color4Pos);\n  float minD = min(dp1, min(dp2, min(dp3, dp4)));\n  float p = 3.0;\n\n  dp1 = pow(1.0 - (dp1 - minD), p);\n  dp2 = pow(1.0 - (dp2 - minD), p);\n  dp3 = pow(1.0 - (dp3 - minD), p);\n  dp4 = pow(1.0 - (dp4 - minD), p);\n  float dpt = abs(dp1 + dp2 + dp3 + dp4);\n\n  gl_FragColor =\n    (vec4(color1 / 255.0, 1.0) * dp1 / dpt) +\n    (vec4(color2 / 255.0, 1.0) * dp2 / dpt) +\n    (vec4(color3 / 255.0, 1.0) * dp3 / dpt) +\n    (vec4(color4 / 255.0, 1.0) * dp4 / dpt);\n}\n"]);for(const e of l)r.attachShader(c,e);r.linkProgram(c),r.getProgramParameter(c,r.LINK_STATUS),r.useProgram(c);const d=r.getAttribLocation(c,"a_position"),u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),r.STATIC_DRAW),r.viewport(0,0,r.canvas.width,r.canvas.height),r.useProgram(c),r.enableVertexAttribArray(d),r.bindBuffer(r.ARRAY_BUFFER,u),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0);const m=r.getUniformLocation(c,"resolution"),p=r.getUniformLocation(c,"color1"),h=r.getUniformLocation(c,"color2"),f=r.getUniformLocation(c,"color3"),g=r.getUniformLocation(c,"color4"),A=r.getUniformLocation(c,"color1Pos"),y=r.getUniformLocation(c,"color2Pos"),v=r.getUniformLocation(c,"color3Pos"),E=r.getUniformLocation(c,"color4Pos"),C=[[.265,.582],[.176,.918],[1-.585,.836],[.644,.755],[.735,1-.582],[1-.176,1-.918],[.585,.164],[.356,.245]];let b,w,I,N,S=0;function x(){b=C[S%8],w=C[(S+2)%8],I=C[(S+4)%8],N=C[(S+6)%8],S=(S+1)%8}x();const T=[b[0],b[1]],P=[w[0],w[1]],k=[I[0],I[1]],R=[N[0],N[1]];function M(){r.uniform2fv(m,[r.canvas.width,r.canvas.height]),r.uniform3fv(p,n[0]),r.uniform3fv(h,n[1]),r.uniform3fv(f,n[2]),r.uniform3fv(g,n[3]),r.uniform2fv(A,T),r.uniform2fv(y,P),r.uniform2fv(v,k),r.uniform2fv(E,R),r.drawArrays(r.TRIANGLES,0,6)}M();const L=.1;let U=!1;function j(){U=!0,s(T,b)>.01||s(P,w)>.01||s(k,I)>.01||s(k,I)>.01?(T[0]=.9*T[0]+b[0]*L,T[1]=.9*T[1]+b[1]*L,P[0]=.9*P[0]+w[0]*L,P[1]=.9*P[1]+w[1]*L,k[0]=.9*k[0]+I[0]*L,k[1]=.9*k[1]+I[1]*L,R[0]=.9*R[0]+N[0]*L,R[1]=.9*R[1]+N[1]*L,M(),requestAnimationFrame(j)):U=!1}return()=>{x(),U||(0,i.IJ)(j)}}function s(e,t){return Math.sqrt((e[1]-t[1])*(e[1]-t[1]))}var c=n(87357);const l=new Map,d=(0,o.ph)((function({colors:e,size:t,maskImage:n,cover:i,noAnimate:a}){const s=(0,o.li)(null);return(0,o.vJ)((()=>{if(!e)return()=>{};const t=s.current;if(!t)return()=>{};if(a)return r(t,e??[]),()=>{};let n=l.get(t);return n||(n=r(t,e??[]),l.set(t,n)),()=>l.delete(t)}),[s,e,a,i]),o.Ay.createElement("canvas",{ref:s,width:t,height:t,className:(0,c.A)(n&&"l2PQ3Ztp",i&&"EfnMDw93"),style:n?`--mask-image: ${n}`:void 0})}));function u(){for(const e of l.values())e()}},75373:(e,t,n)=>{n.d(t,{A:()=>oe});var o=n(84051),i=n(13439),a=n(90709),r=n(26129),s=n(29807),c=n(87357),l=n(14242),d=n(66833),u=n(59776),m=n(4961),p=n(18501),h=n(54464),f=n(10722),g=n(49746),A=n(37661),y=n(5912),v=n(39351),E=n(59030),C=n(14622),b=n(50680),w=n(79519),I=n(79577),N=n(21849),S=n(87049),x=n(40558),T=n(85118),P=n(23174),k=n(89925),R=n(87679),M=n(17712),L=n(62587),U=n(94189),j=n(68584);const O=(0,o.ph)((({message:e,renderContent:t})=>{const{openMediaViewer:n,uploadProfilePhoto:r,showNotification:s}=(0,i.ko)(),{isOutgoing:c}=e,l=(0,E.A)(),[d,u]=(0,o.J0)(),[m,p,h]=(0,A.A)(!1),f=e.content.action.photo,g=(0,L.A)((0,a.rIo)(f,"full")),y=(0,L.A)((0,a.Pgy)(f)),v=e.content.action.photo?.isVideo,C=(0,M.A)((()=>{s({title:l("ApplyAvatarHintTitle"),message:l("ApplyAvatarHint"),action:{action:"requestNextSettingsScreen",payload:{screen:k.VS.Main}},actionText:l("Open")})})),b=(0,M.A)((e=>{u(void 0),r({file:e}),C()})),w=(0,M.A)((()=>{u(void 0)})),I=(0,M.A)((async()=>{if(!y)return;h(),C();const e=await(0,R.sZ)(y);r({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:f.videoSizes?.find((e=>void 0!==e.videoStartTs))?.videoStartTs})}));return o.Ay.createElement("span",{className:"action-message-suggested-avatar",tabIndex:0,role:"button",onClick:async()=>{!c&&g?v?p():u(await(0,R.sZ)(g)):n({chatId:e.chatId,messageId:e.id,threadId:P.l3,origin:k.TQ.SuggestedAvatar})}},o.Ay.createElement(N.A,{photo:e.content.action.photo,loopIndefinitely:!0,withVideo:v,size:"jumbo"}),o.Ay.createElement("span",null,t()),o.Ay.createElement("span",{className:"action-message-button"},l(v?"ViewVideoAction":"ViewPhotoAction")),o.Ay.createElement(j.A,{file:d,onClose:w,onChange:b}),o.Ay.createElement(U.A,{isOpen:m,title:l("SuggestedVideo"),confirmHandler:I,onClose:h,textParts:t()}))})),F=(0,o.ph)((({message:e,renderContent:t})=>{const{openMediaViewer:n}=(0,i.ko)(),a=(0,E.A)();return o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement("span",null,t()),o.Ay.createElement("span",{className:"action-message-updated-avatar",tabIndex:0,role:"button",onClick:()=>{n({chatId:e.chatId,messageId:e.id,threadId:P.l3,origin:k.TQ.SuggestedAvatar})},"aria-label":a("ViewPhotoAction")},o.Ay.createElement(N.A,{photo:e.content.action.photo,loopIndefinitely:!0,withVideo:!0,size:"jumbo"})))}));var B=n(19381),D=n(43581),K=n(14737),H=n(48894);var z=n(36838),G=n(18276),$=n(64493),V=n(55158);const J="d8axZxyN",q="glDpC2av",_="gqCs9fSo",W="gnYhwnvf",Y="HWgwnKui",Z="BTNQ4KBH",Q="Xl9MVMTn",X="Qizai7yv";function ee({channel:e}){const{openChat:t}=(0,i.ko)(),n=function(e,t="#00000000"){const[n,i]=(0,o.J0)(t),r=(0,L.A)((0,a.cP1)(e),!1,P.qZ.BlobUrl);return(0,o.vJ)((()=>{(async()=>{if(!r)return;const e=await(0,H.rX)(r);i(`#${(0,H.v2)(e)}`)})()}),[r]),n}(e,"#3C3C4399");return o.Ay.createElement("div",{className:q,onClick:()=>t({id:e.id})},o.Ay.createElement(N.A,{className:_,key:e.id,size:"large",peer:e}),o.Ay.createElement("div",{style:`background: ${n}`,className:W},o.Ay.createElement(G.A,{name:"user-filled",className:J}),o.Ay.createElement("span",{className:Y},(0,l.Vw)(e?.membersCount||0))),o.Ay.createElement("span",{className:Z},e.title))}function te({channel:e,chatId:t,channelsCount:n,isCurrentUserPremium:a}){const{openPremiumModal:r,openChatWithInfo:s}=(0,i.ko)(),l=(0,E.A)();return o.Ay.createElement("div",{className:(0,c.A)(q,"MBChXyXk"),onClick:()=>{a?s({id:t,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):r()}},o.Ay.createElement(N.A,{className:_,key:e.id,size:"large",peer:e}),o.Ay.createElement("div",{className:Q},o.Ay.createElement("div",{className:X})),o.Ay.createElement("div",{className:(0,c.A)(Q,"JxSmtOFi")},o.Ay.createElement("div",{className:X})),o.Ay.createElement("div",{className:W},o.Ay.createElement("span",{className:Y},`+${n}`),!a&&o.Ay.createElement(G.A,{name:"lock-badge",className:J})),o.Ay.createElement("span",{className:Z},l("MoreSimilar")))}const ne=(0,o.ph)((0,i.EK)(((e,{chatId:t})=>{const{similarChannelIds:n,shouldShowInChat:o,count:i}=(0,s.dg4)(e,t)||{};return{similarChannelIds:n,shouldShowInChat:o,count:i,isCurrentUserPremium:(0,s.g29)(e)}}))((({chatId:e,similarChannelIds:t,shouldShowInChat:n,count:a,isCurrentUserPremium:r})=>{const l=(0,E.A)(),{toggleChannelRecommendations:d,loadChannelRecommendations:u}=(0,i.ko)(),[m,p,h]=(0,A.A)(!1),[f,g,y]=(0,A.A)(!1),v=(0,o.li)(null),C=(0,o.Kr)((()=>{if(!t)return;const e=(0,i.mS)();return t.map((t=>(0,s.hds)(e,t))).filter(Boolean)}),[t]),[b,w]=(0,o.J0)(!t),I=(0,o.Kr)((()=>C?.slice(0,10)),[C]),N=Boolean(I?.length);(0,z.A)(v,!N||!n||b,!0);const S=Boolean(!b&&(n||f||m)&&N);(0,o.vJ)((()=>{t||u({chatId:e})}),[e,t]),(0,K.A)((()=>w(!1)),2e3),(0,o.vJ)((()=>{if(b&&C&&n){const e=setTimeout((()=>{w(!1)}),300);return()=>clearTimeout(e)}}),[C,n,b]);const x=(0,M.A)((()=>{d({chatId:e}),n?(h(),g()):(p(),y())}));return o.Ay.createElement("div",{className:(0,c.A)("V3RHiOJR")},o.Ay.createElement("div",{className:"join-text"},o.Ay.createElement("span",{className:(0,c.A)(N&&"UHAMd4fI"),onClick:N?x:void 0},l("ChannelJoined"))),b&&o.Ay.createElement(V.A,{className:"xKVZv7KE"}),S&&o.Ay.createElement("div",{className:(0,c.A)(m&&"eb8rX09E",f&&"XR6_qLCc")},o.Ay.createElement("div",{className:"tfG_BSDt"},o.Ay.createElement("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.Ay.createElement("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"}))),o.Ay.createElement("div",{className:"njAC8dR9"},o.Ay.createElement("div",{className:"s7QOi22Q"},o.Ay.createElement("span",{className:"JstcOhAN"},l("SimilarChannels")),o.Ay.createElement($.A,{className:"meewH7t_",color:"translucent",onClick:x},o.Ay.createElement(G.A,{name:"close"}))),o.Ay.createElement("div",{ref:v,className:(0,c.A)("h4gWlNen","no-scrollbar")},I?.map(((t,n)=>9===n?o.Ay.createElement(te,{channel:t,chatId:e,channelsCount:a-10+1,isCurrentUserPremium:r}):o.Ay.createElement(ee,{channel:t})))))))}))),oe=(0,o.ph)((0,i.EK)(((e,{message:t,threadId:n})=>{const{chatId:o,senderId:i,content:a}=t,{targetUserIds:c,targetChatId:l}=a.action||{},d=(0,r.Q)(t)?.replyToMsgId,u=d?(0,s.O5q)(e,o,d):void 0,m=(0,s.SJA)(e),{patternColor:p}=e.settings.themes[m]||{},h=!!n&&(0,s.nJv)(e,t,n),{direction:f,noHighlight:g}=h&&(0,s.nTw)(e).focusedMessage||{},A=(0,s.mBe)(e,i||o),y=(0,s.hds)(e,o),v=l?(0,s.hds)(e,l):void 0,E=a.action?.months,C=(0,s.t0O)(e,E),b=a.action?.stars;return{senderUser:A,senderChat:y,targetChat:v,targetChatId:l,targetUserIds:c,targetMessage:u,isFocused:h,premiumGiftSticker:C,starsGiftSticker:(0,s.WLj)(e,b),topic:(0,s.nkm)(e,t),patternColor:p,canPlayAnimatedEmojis:(0,s.BWX)(e),...h&&{focusDirection:f,noFocusHighlight:g},isCurrentUserPremium:(0,s.g29)(e),currentUserId:e.currentUserId}}))((({message:e,threadId:t,isEmbedded:n,appearanceOrder:r=0,isJustAdded:P,isLastInList:k,senderUser:R,senderChat:M,targetUserIds:L,targetMessage:U,targetChatId:j,targetChat:K,isFocused:H,focusDirection:z,noFocusHighlight:G,premiumGiftSticker:$,starsGiftSticker:V,isInsideTopic:J,topic:q,memoFirstUnreadIdRef:_,canPlayAnimatedEmojis:W,patternColor:Y,observeIntersectionForReading:Z,observeIntersectionForLoading:Q,observeIntersectionForPlaying:X,onIntersectPinnedMessage:ee,currentUserId:te,isCurrentUserPremium:oe})=>{const{openPremiumModal:ie,requestConfetti:ae,checkGiftCode:re,getReceipt:se,openGiftInfoModalFromMessage:ce,openPrizeStarsTransactionFromGiveaway:le}=(0,i.ko)(),de=(0,E.A)(),ue=(0,v.A)(),me=(0,o.li)(null);(0,y.mv)(me,Z),(0,g.A)(e.chatId,"message"===e.replyInfo?.type?e.replyInfo.replyToMsgId:void 0,U),(0,w.A)({elementRef:me,chatId:e.chatId,isFocused:H,focusDirection:z,noFocusHighlight:G,isJustAdded:P}),(0,o._W)((()=>{e.isPinned&&ee?.({viewportPinnedIdsToRemove:[e.id]})}));const pe=r<=0,[he,fe]=(0,A.A)(pe),ge="giftPremium"===e.content.action?.type,Ae="giftCode"===e.content.action?.type,ye="suggestProfilePhoto"===e.content.action?.type&&e.content.action.photo,ve="updateProfilePhoto"===e.content.action?.type&&e.content.action.photo,Ee=(0,a.CVz)(e),Ce="giftStars"===e.content.action?.type,be="starGift"===e.content.action?.type,we="starGiftUnique"===e.content.action?.type,Ie="prizeStars"===e.content.action?.type,Ne=Boolean(e.areReactionsPossible&&e?.reactions);(0,C.A)(me,k),(0,o.vJ)((()=>{pe||setTimeout(fe,10*r)}),[r,fe,pe]);const Se=(0,y.Vz)(me,X),xe=(0,o.li)((()=>{const t=_?.current&&e.id>=_.current;return ge&&!e.isOutgoing&&t})());(0,o.vJ)((()=>{Se&&xe.current&&(xe.current=!1,ae({withStars:!0}))}),[Se,ae]);const{transitionClassNames:Te}=(0,b.A)(he,void 0,pe,!1),Pe=(0,i.mS)().users.byId,ke=(0,o.Kr)((()=>L?L.map((e=>Pe?.[e])).filter(Boolean):void 0),[L,Pe]),Re=(0,o.hb)((()=>(0,u.V)(de,e,R,M,ke,U,j,q,{isEmbedded:n},Q,X)),[n,e,Q,X,de,M,R,j,U,ke,q]),{isContextMenuOpen:Me,contextMenuAnchor:Le,handleBeforeContextMenu:Ue,handleContextMenu:je,handleContextMenuClose:Oe,handleContextMenuHide:Fe}=(0,f.A)(me),Be=void 0!==Le,De=()=>{const t=e.content.action?.starGift;t&&ce({chatId:e.chatId,messageId:e.id})},Ke=()=>{ie({isGift:!0,fromUserId:R?.id,toUserId:L?.[0],monthsAmount:e.content.action?.months||0})},He=()=>{le({chatId:e.chatId,messageId:e.id})},ze=()=>{const t=e.content.action?.slug;t&&re({slug:t,message:{chatId:e.chatId,messageId:e.id}})};if(J&&"TopicWasCreatedAction"===e.content.action?.text)return o.Ay.createElement("span",{ref:me});if(n)return o.Ay.createElement("span",{ref:me,className:"embedded-action-message"},Re());function Ge(){const t=e.content.action?.starGift;if(!t)return;const{fromId:n,peerId:r}=t,c=n?(0,s.PVB)((0,i.mS)(),n):void 0,l=r?(0,s.PVB)((0,i.mS)(),r):"starGiftUnique"!==t.type||e.isOutgoing?void 0:K;return l&&l.id!==te?o.Ay.createElement("div",{className:"action-message-user-caption"},o.Ay.createElement("span",null," ",ue("GiftTo")," "),"starGift"===t.type&&o.Ay.createElement(N.A,{className:"action-message-user-avatar",size:"micro",peer:l}),o.Ay.createElement("span",null," ",(0,a.F9N)(ue,l)," ")):o.Ay.createElement("div",{className:"action-message-user-caption"},o.Ay.createElement("span",null," ",ue("GiftFrom")," "),"starGift"===t.type&&o.Ay.createElement(N.A,{className:"action-message-user-avatar",size:"micro",peer:c||R}),o.Ay.createElement("span",null," ",(0,a.F9N)(ue,c||R)," "))}const $e=(0,c.A)("ActionMessage message-list-item",H&&!G&&"focused",(ge||ye||ve)&&"centered-action",Be&&"has-menu-open",k&&"last-in-list",Te);return o.Ay.createElement("div",{ref:me,id:(0,a.GZP)(e.id),className:$e,"data-message-id":e.id,"data-is-pinned":e.isPinned||void 0,onMouseDown:e=>{(0,h.l)(e),Ue(e)},onContextMenu:je},!ye&&!Ae&&!Ee&&!ve&&o.Ay.createElement("span",{className:"action-message-content",onClick:()=>{"receipt"===e.content.action?.type&&se({chatId:e.chatId,messageId:e.id})}},Re()),ge&&function(){const t=e.content.action?.message;return o.Ay.createElement("span",{className:"action-message-gift",tabIndex:0,role:"button",onClick:Ke},o.Ay.createElement(I.A,{key:e.id,sticker:$,play:W,noLoop:!0,nonInteractive:!0}),o.Ay.createElement("strong",null,de("ActionGiftPremiumTitle")),o.Ay.createElement("span",null,de("ActionGiftPremiumSubtitle",de("Months",e.content.action?.months,"i"))),t&&o.Ay.createElement("div",{className:"action-message-gift-subtitle"},(0,p.f)({text:t.text,entities:t.entities})),o.Ay.createElement("span",{className:"action-message-button"},o.Ay.createElement(T.A,{preset:"button"}),de("ActionGiftPremiumView")))}(),Ae&&function(){const t=e.content.action?.isGiveaway,n=e.content.action?.isUnclaimed,i=e.content.action?.message;return o.Ay.createElement("span",{className:"action-message-gift action-message-centered",tabIndex:0,role:"button",onClick:ze},o.Ay.createElement(I.A,{key:e.id,sticker:$,play:W,noLoop:!0,nonInteractive:!0}),o.Ay.createElement("strong",null,de(n?"BoostingUnclaimedPrize":"BoostingCongratulations")),o.Ay.createElement("span",{className:"action-message-subtitle"},K&&(0,m.A)(de(t?"BoostingReceivedGiftFrom":n?"BoostingReceivedPrizeFrom":"BoostingYouHaveUnclaimedPrize",(0,a.JsG)(de,K)),["simple_markdown"])),o.Ay.createElement("span",{className:"action-message-subtitle"},(0,m.A)(de("BoostingUnclaimedPrizeDuration",de("Months",e.content.action?.months,"i")),["simple_markdown"])),i&&o.Ay.createElement("div",{className:"action-message-gift-subtitle"},(0,p.f)({text:i.text,entities:i.entities})),o.Ay.createElement("span",{className:"action-message-button"},de("BoostingReceivedGiftOpenBtn")))}(),Ce&&o.Ay.createElement("span",{className:"action-message-gift action-message-centered",tabIndex:0,role:"button",onClick:De},o.Ay.createElement(I.A,{key:e.id,sticker:V,play:W,noLoop:!0,nonInteractive:!0}),o.Ay.createElement("div",{className:"action-message-stars-balance"},(0,l.Sm)(e.content.action.stars),o.Ay.createElement("strong",null,de("Stars"))),o.Ay.createElement("span",{className:"action-message-stars-subtitle"},(0,m.A)(de(e.isOutgoing?"ActionGiftStarsSubtitle":"ActionGiftStarsSubtitleYou",(0,a.JsG)(de,K)),["simple_markdown"])),o.Ay.createElement("span",{className:"action-message-button"},o.Ay.createElement(T.A,{preset:"button"}),de("ActionGiftPremiumView"))),be&&function(){const t=e.content.action?.starGift;if(t&&"starGift"===t.gift.type)return o.Ay.createElement("span",{className:"action-message-gift action-message-centered",tabIndex:0,role:"button",onClick:De},o.Ay.createElement(I.A,{sticker:t.gift.sticker,play:W,noLoop:!0,nonInteractive:!0,size:120}),Ge(),o.Ay.createElement("div",{className:"action-message-gift-subtitle"},function(){const t=e.content.action?.starGift,n=K&&(0,a.F9N)(ue,K),o=t?.message;if(!t)return;if(o)return(0,p.f)({text:o.text,entities:o.entities});const i=t?.starsToConvert;if(t.isSaved)return ue(t.savedId?"ActionStarGiftChannelDisplaying":"ActionStarGiftDisplaying");if(t.isUpgraded)return ue("ActionStarGiftUpgraded");if(e.isOutgoing){if(i)return ue("ActionStarGiftPeerOutDescription",{peer:n||"Someone",count:i},{withNodes:!0,pluralValue:i});if(t.canUpgrade)return ue("ActionStarGiftPeerOutDescriptionUpgrade",{peer:n||"Someone"})}return t.isConverted?e.isOutgoing?ue("GiftInfoPeerDescriptionOutConverted",{amount:(0,l.Sm)(i),peer:n||"Chat"},{pluralValue:i,withNodes:!0,withMarkdown:!0}):ue("GiftInfoDescriptionConverted",{amount:(0,l.Sm)(i)},{pluralValue:i,withNodes:!0,withMarkdown:!0}):i?ue("ActionStarGiftDescription2",{count:i},{withNodes:!0,pluralValue:i}):t.canUpgrade?ue("ActionStarGiftDescriptionUpgrade"):void 0}()),o.Ay.createElement("div",{className:"action-message-button"},o.Ay.createElement(T.A,{preset:"button"}),!t.alreadyPaidUpgradeStars||e.isOutgoing&&!ke?.[0]?.isSelf?de("ActionGiftPremiumView"):ue("ActionStarGiftUnpack")),t.gift.availabilityTotal&&o.Ay.createElement(S.A,{color:Y||"blue",text:de("Gift2Limited1OfRibbon",(0,l.Vw)(t.gift.availabilityTotal))}))}(),we&&function(){const t=e.content.action?.starGift;if(!t||"starGiftUnique"!==t.gift.type)return;const n=(0,d.yQ)(t.gift),i=(0,d.uc)(t.gift),{backdrop:a,pattern:r,model:s}=i||{};if(!a||!r||!s)return;const c=[a.centerColor,a.edgeColor],l=`${a.patternColor.slice(0,7)}55`;return o.Ay.createElement("span",{className:"action-message-gift action-message-centered action-message-unique",tabIndex:0,role:"button",style:`--pattern-color: ${l}`,onClick:De},o.Ay.createElement("div",{className:"action-message-unique-background-wrapper"},o.Ay.createElement(x.A,{className:"action-message-unique-background",backgroundColors:c,patternColor:a.patternColor,patternIcon:r.sticker,clearBottomSector:!0})),o.Ay.createElement(I.A,{sticker:n,play:W,noLoop:!0,nonInteractive:!0,size:120}),Ge(),o.Ay.createElement("div",{className:"action-message-unique-title",style:`color: ${a.textColor}`},t.gift.title," #",t.gift.number),o.Ay.createElement("div",{className:"action-message-unique-properties",style:`color: ${a.textColor}`},o.Ay.createElement("div",{className:"action-message-unique-property"},de("Gift2AttributeModel")),o.Ay.createElement("div",{className:"action-message-unique-value"},s.name),o.Ay.createElement("div",{className:"action-message-unique-property"},de("Gift2AttributeBackdrop")),o.Ay.createElement("div",{className:"action-message-unique-value"},a.name),o.Ay.createElement("div",{className:"action-message-unique-property"},de("Gift2AttributeSymbol")),o.Ay.createElement("div",{className:"action-message-unique-value"},r.name)),o.Ay.createElement("div",{className:"action-message-button"},o.Ay.createElement(T.A,{preset:"button"}),de("Gift2UniqueView")),o.Ay.createElement(S.A,{color:l,text:de("ActionStarGift")}))}(),Ie&&function(){const t=e.content.action?.isUnclaimed;return o.Ay.createElement("span",{className:"action-message-gift action-message-centered",tabIndex:0,role:"button",onClick:He},o.Ay.createElement(I.A,{key:e.id,sticker:V,play:W,noLoop:!0,nonInteractive:!0}),o.Ay.createElement("strong",null,de(t?"BoostingUnclaimedPrize":"BoostingCongratulations")),o.Ay.createElement("span",{className:"action-message-subtitle"},K&&(0,m.A)(de(t?"BoostingReceivedPrizeFrom":"BoostingYouHaveUnclaimedPrize",(0,a.JsG)(de,K)),["simple_markdown"])),o.Ay.createElement("span",{className:"action-message-subtitle"},(0,m.A)(ue("PrizeCredits2",{count:o.Ay.createElement("b",null,(0,l.Sm)(e.content.action?.stars))},{withNodes:!0,pluralValue:e.content.action?.stars}),["simple_markdown"])),o.Ay.createElement("span",{className:"action-message-button"},de("ActionGiftPremiumView")))}(),ye&&o.Ay.createElement(O,{message:e,renderContent:Re}),ve&&o.Ay.createElement(F,{message:e,renderContent:Re}),Ee&&o.Ay.createElement(ne,{chatId:j}),Le&&o.Ay.createElement(B.A,{isOpen:Me,anchor:Le,message:e,messageListType:"thread",onClose:Oe,onCloseAnimationEnd:Fe}),Ne&&o.Ay.createElement(D.A,{isOutside:!0,message:e,threadId:t,observeIntersection:X,isCurrentUserPremium:oe}))})))},18347:(e,t,n)=>{n.d(t,{A:()=>A});var o=n(84051),i=n(13439),a=n(31481),r=n(29807),s=n(87357),c=n(11778),l=n(36838),d=n(5912),u=n(17712),m=n(73767),p=n(50680),h=n(76453),f=n(52745);const g={root:"_8sFuAomM",emojiButton:"crWzZ2jr"},A=(0,o.ph)((0,i.EK)(((e,{chatId:t})=>{const{stickers:n}=e.customEmojis.forEmoji;return{customEmoji:n,isSavedMessages:!!t&&(0,r.nZ4)(e,t),isCurrentUserPremium:(0,r.g29)(e)}}))((({isOpen:e,addRecentCustomEmoji:t,onCustomEmojiSelect:n,onClose:r,customEmoji:A,isSavedMessages:y,isCurrentUserPremium:v,noPlay:E})=>{const{clearCustomEmojiForEmoji:C}=(0,i.ko)(),b=(0,o.li)(null),{shouldRender:w,transitionClassNames:I}=(0,p.A)(e,void 0,void 0,!1),N=(0,m.A)(A,!0),S=A||N;(0,l.A)(b);const{observe:x}=(0,d.BL)({rootRef:b,throttleMs:200,isDisabled:!e});(0,o.vJ)((()=>e?(0,c.A)(r):void 0),[e,r]);const T=(0,u.A)((o=>{e&&(n(o),t({documentId:o.id}),C())})),P=(0,s.A)(g.root,"composer-tooltip custom-scroll-x",I,!S?.length&&g.hidden);return o.Ay.createElement("div",{ref:b,className:P},w&&S?S.map((e=>o.Ay.createElement(h.A,{key:e.id,sticker:e,className:g.emojiButton,size:a.x6_,observeIntersection:x,onClick:T,clickArg:e,isSavedMessages:y,canViewSet:!0,isCurrentUserPremium:v,noPlay:E}))):w?o.Ay.createElement(f.A,null):void 0)})))},17979:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(31481),a=n(87357),r=n(52491),s=n(82393),c=n(17712);const l=(0,o.ph)((({emoji:e,focus:t,onClick:n})=>{const l=(0,c.A)((t=>{t.preventDefault(),n(e.native,e.id)})),d=(0,a.A)("EmojiButton",t&&"focus"),u=`${i.jht?i.C1b:"."}/img-apple-64/${e.image}.png`,m=r.On.has(u);return o.Ay.createElement("div",{className:d,onMouseDown:l,title:`:${e.names[0]}:`},s.TL?e.native:o.Ay.createElement("img",{src:u,className:m?void 0:"opacity-transition shown",alt:e.native,loading:"lazy","data-path":u,onLoad:m?void 0:r.P_,draggable:!1}))}))},97150:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(84051),i=n(57446),a=n(87357),r=n(73728),s=n(32555),c=n(82117),l=n(36838),d=n(5912),u=n(17712),m=n(23565),p=n(50680),h=n(56676),f=n(52745),g=n(87412);const A=(0,o.ph)((({emoji:e,focus:t,onClick:n,observeIntersection:i})=>{const r=(0,u.A)((t=>{t.preventDefault(),n?.(e)})),s=(0,a.A)("EmojiButton",t&&"focus");return o.Ay.createElement("div",{className:s,onMouseDown:r,title:e.emoji},o.Ay.createElement(g.A,{documentId:e.id,size:32,withSharedAnimation:!0,shouldPreloadPreview:!0,observeIntersectionForPlaying:i}))}));var y=n(17979);const v=(0,o.ph)((({isOpen:e,emojis:t,customEmojis:n,onClose:g,onEmojiSelect:v,onCustomEmojiSelect:E,addRecentEmoji:C,addRecentCustomEmoji:b})=>{const w=(0,o.li)(null),{shouldRender:I,transitionClassNames:N}=(0,p.A)(e,void 0,void 0,!1),S=(0,m.A)(t.length?[...n,...t]:void 0,350)||[];(0,l.A)(w);const{observe:x}=(0,d.BL)({rootRef:w,throttleMs:200,isDisabled:!e}),T=(0,u.A)((e=>{v(e.native),C({emoji:e.id})})),P=(0,u.A)((e=>{E(e),b({documentId:e.id})})),k=(0,u.A)((e=>{"native"in e?T(e):P(e)})),R=(0,u.A)(((e,t)=>{v(e),C({emoji:t})})),M=(0,u.A)((e=>{E(e),b({documentId:e.id})})),L=(0,h.J)({isActive:e,isHorizontal:!0,items:S,shouldRemoveSelectionOnReset:!0,onSelect:k,onClose:g});(0,c.A)((([e])=>{void 0!==e&&-1!==e&&function(e,t){const n=t.current;if(!n)return;const{visibleIndexes:o,allElements:a}=(0,r.A)(n,".EmojiButton",8,!0,!0,!0);if(!a.length||!a[e])return;const c=o[0];if(!o.includes(e)||e===c&&!(0,s.A)(n,a[c],!0)){const t="start"==(e>o[o.length-1]?"start":"end")?44*e:0;(0,i.A)(n,t)}}(L,w)}),[L]);const U=(0,a.A)("EmojiTooltip composer-tooltip custom-scroll-x",N);return o.Ay.createElement("div",{ref:w,className:U},I&&S?S.map(((e,t)=>"native"in e?o.Ay.createElement(y.A,{key:e.id,emoji:e,focus:L===t,onClick:R}):o.Ay.createElement(A,{key:e.id,emoji:e,focus:L===t,onClick:M,observeIntersection:x}))):I?o.Ay.createElement(f.A,null):void 0)}))},16959:(e,t,n)=>{n.d(t,{A:()=>Z});var o=n(84051),i=n(13439),a=n(23174),r=n(31481),s=n(66644),c=n(29807),l=n(87357),d=n(52674),u=n(14680),m=n(17237),p=n(36353),h=n(37836),f=n(82393),g=n(4961),A=n(18501),y=n(11359),v=n(19129),E=n(37661),C=n(41316),b=n(17712),w=n(59030),I=n(97374),N=n(57634),S=n(3225),x=n(25498),T=n(88458),P=n(41733);function k(e,t,n){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?o:o+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(e,t,n){this.container=t,this.options=n,k(this,"video",void 0),k(this,"isPlaying",!1),this.video=document.createElement("video"),this.video.src=e,this.video.disablePictureInPicture=!0,this.video.muted=!0,n.style&&this.video.setAttribute("style",n.style),this.video.style.position="absolute",this.video.load(),this.options.noLoop||(this.video.loop=!0),(0,s.RK)((()=>{this.container.appendChild(this.video),this.recalculatePositionAndSize()}))}play(){!this.isPlaying&&this.video&&(this.recalculatePositionAndSize(),this.video.paused&&(0,P.A)(this.video),this.isPlaying=!0)}pause(){this.isPlaying&&this.video&&(this.video.paused||this.video.pause(),this.isPlaying=!1)}destroy(){this.pause(),this.video?.remove(),this.video=void 0}updatePosition(e){this.options.position=e,this.recalculatePositionAndSize()}recalculatePositionAndSize(){const{size:e,position:{x:t,y:n}}=this.options;(0,s.YS)((()=>{if(!this.video)return;const o=this.video,{width:i,height:a}=this.container.getBoundingClientRect();(0,s.RK)((()=>{o.style.left=`${Math.round(t*i)}px`,o.style.top=`${Math.round(n*a)}px`,o.style.width=`${e}px`,o.style.height=`${e}px`}))}))}}var M=n(60261),L=n(43336),U=n(71322),j=n(76023),O=n(37479),F=n(86974),B=n(82117),D=n(93545),K=n(672),H=n(61157),z=n(38691);const G=1.25*j.$;var $=n(18347),V=n(97150),J=n(80089),q=n(80464);const _=e=>{const{isOpen:t}=e,n=(0,q.A)(J.ar.Extra,"TextFormatter",!t);return n?o.Ay.createElement(n,e):void 0},W="input-scroller",Y=140,Z=(0,o.ph)((0,i.EK)((e=>{const{language:t}=e.settings.byKey,n=(0,c.g29)(e),o=e.emojiKeywords[r.cUY],i=t!==r.cUY?e.emojiKeywords[t]:void 0;return{canPlayAnimatedEmojisGlobal:(0,c.BWX)(e),isCurrentUserPremium:n,recentEmojis:e.recentEmojis,customEmojiForEmoji:e.customEmojis.forEmoji.stickers,baseEmojiKeywords:o?.keywords,emojiKeywords:i?.keywords}}))((({ref:e,captionLimit:t,limitIndicator:n,inputId:a,isActive:r,getHtml:P,htmlOverwrite:k,placeholder:j,placeholderComponent:J,shouldSuppressTextFormatter:q,onUpdate:Z,onScroll:X,onFocus:ee,onBlur:te,isNeedPremium:ne,overwrite:oe,disableTextFormatter:ie,isEditable:ae=!0,maxInputHeight:re=Number.POSITIVE_INFINITY,forcedPlaceholder:se,shouldSuppressFocus:ce,onSuppressedFocus:le,containerId:de,onClick:ue,onKeyDown:me,isReady:pe,customEmojiPrefix:he,canPlayAnimatedEmojis:fe,canPlayAnimatedEmojisGlobal:ge,className:Ae,singleLine:ye,label:ve,isCurrentUserPremium:Ee,handlePaste:Ce=!0,disabledEntities:be,customEmojiForEmoji:we,canUseEmojiTooltip:Ie,chatId:Ne,canRenderEmojiTooltip:Se=!0,recentEmojis:xe,baseEmojiKeywords:Te,emojiKeywords:Pe,cannotInsertHtml:ke,children:Re})=>{const{addRecentCustomEmoji:Me,addRecentEmoji:Le}=(0,i.ko)();be??(be=[]);let Ue=(0,o.li)(null);e&&(Ue=e);const je=(0,o.li)(null),Oe=(0,o.li)(null),Fe=(0,o.li)(null),Be=(0,o.li)(null),De=(0,o.li)(null),Ke=(0,o.li)(null),He=(0,o.li)(null),ze=(0,w.A)(),Ge=(0,o.li)(!1),[$e,Ve,Je]=(0,E.A)(),[qe,_e]=(0,o.J0)(),[We,Ye]=(0,o.J0)(),[Ze,Qe]=(0,o.J0)(!1),Xe=(0,b.A)(((e=!1)=>{(0,s.gm)((()=>{const t=Ue.current.closest(`.${W}`),n=Number(t.style.height.replace("px","")),o=Be.current,{scrollHeight:i}=o,a=Math.min(i,re);if(a===n)return;const r=i>re;function c(){const e=Math.round(50*Math.log(Math.abs(a-n)));t.style.height=`${a}px`,t.style.transitionDuration=`${e}ms`,t.classList.toggle("overflown",r)}return e?void(0,s.RK)(c):c}))}));(0,o.Nf)((()=>{Xe(!1)}),[re]);const et=(0,o.li)(k());(0,o.Nf)((()=>{const e=r?k():"";e!==Ue.current.innerHTML&&(Ue.current.innerHTML=e,rt(),Xe(!e),Z(e)),e!==et.current&&(et.current=e)}),[k,r,Xe,Z,oe]);const tt=(0,b.A)((()=>{Ue.current&&!ne&&((0,o.OV)()?setTimeout(tt,350):(0,p.A)(Ue.current))})),nt=(0,b.A)((()=>{Je(),function(){const e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}()}));function ot(){if(f.pz)return!1;const e=window.getSelection();if(!e||!e.rangeCount||Ge.current)return Je(),f.Ni&&Qe(!1),!1;const t=e.getRangeAt(0),n=t.toString().trim();return!(q||!(0,y.L)(t,a)||!n||(0,m.A)(n)||!t.START_TO_END)||(Je(),!1)}function it(){if(!ot())return;if(Ze)return;const e=window.getSelection().getRangeAt(0),t=e.getBoundingClientRect(),n=Ue.current.closest(`.${W}`).getBoundingClientRect();let o=t.left+t.width/2-n.left;o<Y?o=Y:o>n.width-Y&&(o=n.width-Y),_e({x:o,y:t.top-n.top}),Ye(e),Ve()}function at(){je.current&&window.clearTimeout(je.current),je.current=window.setTimeout(it,260)}function rt(){Oe.current.innerHTML!==Ue.current.innerHTML&&(Oe.current.innerHTML=Ue.current.innerHTML)}(0,o.vJ)((()=>{const e=(0,h.sg)((e=>{"Tab"!==e.key||(0,u.ZJ)()||(e.preventDefault(),(0,s.RK)(tt))}),2e3,!0,!1);return(0,d.A)({onTab:e})}),[tt]);const st=(0,v.A)((()=>Boolean(r&&P())),[r,P]);(0,o.vJ)((()=>{const e=Ue.current;function t(){e.blur()}return ce&&e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}}),[ce]);const ct=(0,l.A)("form-control allow-selection",st&&"touched",ce&&"focus-disabled",ye&&"single-line"),lt=(0,l.A)("input-scroller-content",ne&&"is-need-premium");!function(e,t,n,a,r,l,d,u,m){const p=(0,F.A)(t,!u),h=(0,O.A)(p,!0),f=(0,z.A)(),g=(0,o.li)(new Map),A=(0,b.A)((e=>{e.forEach((e=>{const t=g.current.get(e);t&&(t.destroy(),g.current.delete(e))}))})),y=(0,b.A)((()=>{if(!(u&&t.current&&n.current&&a.current))return;const e=(0,i.mS)(),o=new Set(g.current.keys());Array.from(t.current.querySelectorAll(".custom-emoji")).forEach((t=>{if(!t.dataset.uniqueId)return;const i=`${l}${t.dataset.uniqueId}${p||""}`,s=t.dataset.documentId;o.delete(i);const u=(0,M.ZR)(s);if(!u)return;const m=n.current.getBoundingClientRect(),A=t.getBoundingClientRect(),y=(0,L.LI)((A.left-m.left)/m.width,4),v=(0,L.LI)((A.top-m.top)/m.height,4);if(g.current.has(i))return void g.current.get(i).updatePosition(y,v);const E=e.customEmojis.byId[s];if(!E)return;const C=E?.stickerSetInfo&&(0,c.CzR)(e,E.stickerSetInfo),b=[l,s,p,f].filter(Boolean).join("_");(async function({customEmoji:e,sharedCanvasRef:t,sharedCanvasHqRef:n,absoluteContainerRef:o,renderId:i,viewId:a,mediaUrl:r,position:s,isHq:c,textColor:l,colorFilter:d}){if(e.isLottie){const o=e.shouldUseTextColor&&l?(0,U.E2)(l):void 0,d=(await(0,T.Y)()).init(r,c?n.current:t.current,i,{size:G,coords:s,isLowPriority:!c},a,o?[o.r,o.g,o.b]:void 0);return{play:()=>d.play(),pause:()=>d.pause(),destroy:()=>d.removeView(a),updatePosition:(e,t)=>d.setSharedCanvasCoords(a,{x:e,y:t})}}if(e.isVideo){const t=e.shouldUseTextColor&&d?`filter: ${d};`:void 0,n=new R(r,o.current,{size:G,position:s,style:t});return{play:()=>n.play(),pause:()=>n.pause(),destroy:()=>n.destroy(),updatePosition:(e,t)=>n.updatePosition({x:e,y:t})}}throw new Error("Unsupported custom emoji type")})({customEmoji:E,sharedCanvasRef:n,sharedCanvasHqRef:a,absoluteContainerRef:r,renderId:b,viewId:i,mediaUrl:u,isHq:C,position:{x:y,y:v},textColor:p,colorFilter:h}).then((e=>{d&&e.play(),g.current.set(i,e)}))})),A(Array.from(o))}));(0,o.vJ)((()=>(0,M.K3)(y)),[y]),(0,o.vJ)((()=>{const e=g.current;return()=>{A(Array.from(e.keys()))}}),[]),(0,o.vJ)((()=>{e()&&t.current&&n.current&&m&&u?(0,s.YS)((()=>{y()})):A(Array.from(g.current.keys()))}),[e,y,t,A,n,m,u]),(0,o.Nf)((()=>{document.documentElement.style.setProperty("--input-custom-emoji-filter",h||"none")}),[h]),(0,B.A)((([e])=>{void 0!==e&&p!==e&&y()}),[p,y]);const v=(0,K.A)(y,[y],300,!1);(0,D.A)(n,v),(0,B.A)((([e])=>{f!==e&&(A(Array.from(g.current.keys())),y())}),[f,y]);const E=(0,b.A)((()=>{g.current.forEach((e=>{e.pause()}))})),C=(0,b.A)((()=>{d&&g.current?.forEach((e=>{e.play()}))})),w=(0,b.A)((()=>{(0,s.YS)(C)}));(0,H.A)(E,w)}(P,Ue,De,Ke,He,he,!(!fe||!ge),pe,r);const[dt,ut]=(0,o.J0)(!1);(0,o.vJ)((()=>{const e=Ue.current;function t(){ut(!0)}function n(){ut(!1)}return e?.addEventListener("focus",t),e?.addEventListener("blur",n),e&&ut(document.activeElement===e),()=>[e?.removeEventListener("focus",t),e?.removeEventListener("blur",n)]}),[Ue]);const mt=(0,b.A)(((e,t=a)=>{if(t===a&&ke)return;be.length&&(e=function(e,t){t=Array.from(new Set(t));const n=(new DOMParser).parseFromString(e,"text/html").body;for(const e of t){const t=Q[e];if(!t)continue;let o=!0;do{o=!1;for(const e of n.querySelectorAll(t))e.replaceWith(...e.childNodes),o=!0}while(o)}return n.innerHTML}(e,be));const n=document.getElementById(t);document.execCommand("insertHTML",!1,e),n.dispatchEvent(new Event("input",{bubbles:!0})),(0,s.Uz)((()=>{(0,p.A)(n)}))})),pt=(0,b.A)(((e,t=a)=>{const n=(0,A.Q)(e);mt(n,t)})),ht=(0,I.I)();(Ce?N.A:()=>{})(a,r,pt,(()=>{}),(()=>{}),void 0,!Ee,ht);const ft=(0,C.A)(`#${a}`),{isEmojiTooltipOpen:gt,closeEmojiTooltip:At,filteredEmojis:yt,filteredCustomEmojis:vt,insertEmoji:Et}=(0,x.A)(Boolean(pe&&Ie),P,a,xe,Te,Pe),{isCustomEmojiTooltipOpen:Ct,closeCustomEmojiTooltip:bt,insertCustomEmoji:wt}=(0,S.A)(Boolean(pe&&Ie),P,ft,Ue,we);return o.Ay.createElement("div",{id:de,ref:Fe,className:(0,l.A)("rich-text-input input-group",Ae,ve&&"with-label",(st||dt)&&"touched"),onClick:ce?le:void 0,dir:ze.isRtl?"rtl":void 0},o.Ay.createElement("div",{className:(0,l.A)("custom-scroll",W,ne&&"is-need-premium"),onScroll:X,onClick:ue},o.Ay.createElement("div",{className:lt},o.Ay.createElement("div",{ref:Ue,id:a,className:ct,contentEditable:ae,role:"textbox",dir:"auto",tabIndex:0,onClick:tt,onChange:function(e){const{innerHTML:t,textContent:n}=e.currentTarget;if(Z("<br>"===t?"":t),!f.TF&&(!n||!n.length)&&(f.TL||!t.includes("emoji-small"))&&!t.includes("custom-emoji")){const e=window.getSelection();e&&(Ue.current.blur(),e.removeAllRanges(),(0,p.A)(Ue.current,!0))}rt()},onKeyDown:function(e){if(ye&&"Enter"===e.key&&e.preventDefault(),Xe(!1),!me)return void at();const t=me(e);t&&"object"==typeof t&&("processSelection"in t&&t.processSelection?at():"closeTextFormatter"in t&&t.closeTextFormatter&&Je())},onMouseDown:function(e){function t(e){e instanceof KeyboardEvent&&"Esc"!==e.key&&"Escape"!==e.key||(setTimeout((()=>{Ge.current=!1}),100),window.removeEventListener("keydown",t),window.removeEventListener("mousedown",t))}2===e.button?Ge.current||(Ge.current=!0,document.addEventListener("mousedown",t),document.addEventListener("keydown",t)):Fe.current?.addEventListener("mouseup",at,{once:!0})},onContextMenu:f.Ni?function(e){ot()&&(Qe(!Ze),Ze?Je():(e.preventDefault(),e.stopPropagation(),it()))}:void 0,onTouchCancel:f.Ni?at:void 0,"aria-label":j,onFocus:ne?void 0:ee,onBlur:ne?void 0:te}),!se&&o.Ay.createElement("span",{className:(0,l.A)("placeholder-text",ne&&"is-need-premium"),dir:"auto"},J??j),o.Ay.createElement("canvas",{ref:De,className:"shared-canvas"}),o.Ay.createElement("canvas",{ref:Ke,className:"shared-canvas"}),o.Ay.createElement("div",{ref:He,className:"absolute-video-container"}))),ve&&o.Ay.createElement("label",{htmlFor:a},ve),o.Ay.createElement("div",{ref:Be,className:(0,l.A)("custom-scroll",W,"clone",ne&&"is-need-premium")},o.Ay.createElement("div",{className:lt},o.Ay.createElement("div",{ref:Oe,className:(0,l.A)(ct,"clone"),dir:"auto"}))),(void 0!==t||void 0!==n)&&o.Ay.createElement("div",{className:"max-length-indicator",dir:"auto"},t||n),!ie&&o.Ay.createElement(_,{isOpen:$e,anchorPosition:qe,selectedRange:We,setSelectedRange:Ye,onClose:nt,input:Ue.current||void 0,getHtml:P,disabledEntities:be}),se&&o.Ay.createElement("span",{className:"forced-placeholder"},(0,g.A)(se)),Se&&o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement($.A,{key:`custom-emoji-tooltip-${a}`,chatId:Ne,isOpen:Ct,onCustomEmojiSelect:wt,addRecentCustomEmoji:Me,onClose:bt}),o.Ay.createElement(V.A,{key:`emoji-tooltip-${a}`,isOpen:gt,emojis:yt,customEmojis:vt,addRecentEmoji:Le,addRecentCustomEmoji:Me,onEmojiSelect:Et,onCustomEmojiSelect:Et,onClose:At})),Re)}))),Q={[a.C7.Bold]:"b",[a.C7.Code]:"code",[a.C7.Italic]:"i",[a.C7.Pre]:"pre",[a.C7.Url]:"a",[a.C7.Underline]:"u",[a.C7.Spoiler]:"span.spoiler",[a.C7.CustomEmoji]:"img.custom-emoji"}},55153:(e,t,n)=>{n.d(t,{A:()=>d,L:()=>u});var o=n(31481),i=n(87679),a=n(24909);const r=1280,s=40,c=20,l=/\.[^/.]+$/;async function d(e,t,c){const u=URL.createObjectURL(t),{type:p,size:h}=t;let f,g,A,y;if(o.gex.has(p)){const n=await(0,i.NN)(u),{width:h,height:g}=n;y=!m(h,g);const v=Math.max(h,g)>r,E=p===o.Vz3;if(!y){if(!c?.compressedBlobUrl&&!E&&(v||"image/jpeg"!==p)){const n=await(0,a.s)(u,v?r/Math.max(h,g):1,"image/jpeg");return URL.revokeObjectURL(u),d(e,t,{compressedBlobUrl:n})}"image/jpeg"===p&&(e=e.replace(l,".jpg")),f={width:h,height:g}}A=Math.max(h,g)>s?await(0,a.s)(u,s/Math.max(h,g),"image/jpeg"):u}else if(o.fNs.has(p)){try{const{videoWidth:e,videoHeight:t,duration:n}=await(0,i.FW)(u);y=!m(e,t),y||(f={width:e,height:t,duration:n})}catch(e){y=!0}A=await(0,i.eT)(u)}else if(o.IH3.has(p)){const{duration:e,title:t,performer:o,coverUrl:i}=await async function(e){const{fetchFromUrl:t,selectCover:o}=await n.e(244).then(n.t.bind(n,30244,23)),i=await t(e),{common:{title:a,artist:r,picture:s},format:{duration:c}}=i,l=o(s),d=l?new Blob([l.data],{type:l.format}):void 0;return{title:a,performer:r,duration:c,coverUrl:d?URL.createObjectURL(d):void 0}}(u);g={duration:e||0,title:t,performer:o},A=i}return{blobUrl:u,filename:e,mimeType:p,size:h,quick:f,audio:g,previewBlobUrl:A,shouldSendAsFile:y||void 0,uniqueId:`${Date.now()}-${Math.random()}`,...c}}function u(e,t){return e.map((e=>t?e.compressedBlobUrl?{...e,blobUrl:e.compressedBlobUrl}:e:{...e,shouldSendAsFile:!(e.voice||e.audio)||void 0,shouldSendAsSpoiler:void 0}))}function m(e,t){return Math.max(e,t)/Math.min(e,t)<=c}},45761:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(87679);async function i(e){const t=[];function n(e,o){return new Promise((i=>{if(e instanceof File)t.push(e),i(e);else if(e.isFile){const n=o.getAsFile();e.file((e=>{t.push(e),i(e)}),(()=>{n&&t.push(n),i(n)}))}else e.isDirectory&&e.createReader().readEntries((e=>{const t=[];for(let i=0;i<e.length;i++)t.push(n(e[i],o));i(Promise.all(t))}))}))}const i=[];for(let t=0;t<e.length;t++){const o=e[t];if("file"===o.kind){const e=o.webkitGetAsEntry()||o.getAsFile();e&&i.push(n(e,o))}}return await Promise.all(i),(0,o.kc)(t)}},25423:(e,t,n)=>{n.d(t,{J:()=>i});var o=n(31481);function i(){const e=window.getSelection();if(!e||e.focusNode!==e.anchorNode)return;let t=e.focusNode;for(;t&&!(t instanceof HTMLElement&&t.id===o.CfG);){if(t instanceof HTMLQuoteElement)return t;t=t.parentElement}}},17778:(e,t,n)=>{n.d(t,{S:()=>s});const o=/(<br>|<br\s?\/>)/g,i=/(&nbsp;|\u00A0)/g,a=/(<div>|<\/div>)/gi,r=/\n$/i;function s(e){return e.replace(i," ").replace(o,"\n").replace(a,"").replace(r,"")}},11359:(e,t,n)=>{n.d(t,{L:()=>i});const o=5;function i(e,t){const{commonAncestorContainer:n}=e;let i=n,a=1;for(;i&&i.id!==t&&a<o;)i=i.parentElement,a++;return Boolean(i&&i.id===t)}},57634:(e,t,n)=>{n.d(t,{A:()=>x});var o=n(84051),i=n(13439),a=n(31481),r=n(90709),s=n(78396),c=n(32669),l=n(55153),d=n(23174);const u=/id="docs-internal-guid/i,m={BOLD:"700",ITALIC:"italic",UNDERLINE:"underline",STRIKETHROUGH:"line-through",SUPERSCRIPT:"super",SUBSCRIPT:"sub"},p={ANCHOR:"a",BOLD:"strong",ITALIC:"em",UNDERLINE:"u",BLOCKQUOTE:"blockquote",STRIKETHROUGH:"del",SUPERSCRIPT:"sup",SUBSCRIPT:"sub"},h=["H1","H2","H3","H4","H5","H6"];function f(e){return(new DOMParser).parseFromString(e,"text/html").body}function g(e,t){const n=document.createElement(p.ANCHOR);return n.href=t,n.appendChild(e.cloneNode(!0)),n}function A(e,t){const n=document.createElement(t);return n.appendChild(e.cloneNode(!0)),n}function y(e,t){let n=t.cloneNode(!0);return e?(e.style&&e.style.fontWeight===m.BOLD&&(n=A(n,p.BOLD)),e.style&&e.style.fontStyle===m.ITALIC&&(n=A(n,p.ITALIC)),e.style&&e.style.textDecoration===m.UNDERLINE&&(n=A(n,p.UNDERLINE)),e.style&&e.style.textDecoration===m.STRIKETHROUGH&&(n=A(n,p.STRIKETHROUGH)),e.style&&e.style.verticalAlign===m.SUPERSCRIPT&&(n=A(n,p.SUPERSCRIPT)),e.style&&e.style.verticalAlign===m.SUBSCRIPT&&(n=A(n,p.SUBSCRIPT)),n):n}function v(e){const t=e.cloneNode(!0);let n=document.createTextNode(t.textContent||""),o=t;return"A"===t.nodeName&&(n=g(n,t.href),"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(o=t.childNodes[0])),n=y(o,n),n}function E(e){if(e.childNodes&&(e.childNodes.length<=1||"OL"===e.nodeName||"UL"===e.nodeName)){let t,n=document.createTextNode(e.textContent||"");if("UL"===e.nodeName||"OL"===e.nodeName||"LI"===e.nodeName){t=document.createElement(e.nodeName),n=document.createDocumentFragment();const o=[];for(let t=0;t<e.childNodes.length;t++)o.push(...E(e.childNodes[t]));o.map((e=>n.appendChild(e)))}else-1!==h.indexOf(e.nodeName)?(t=document.createElement(e.nodeName),n=v(e.childNodes[0])):"P"===e.nodeName?(t=document.createElement("p"),n=function(e){const t=e.cloneNode(!0);let n=document.createTextNode(t.textContent||""),o=document.createTextNode("");return"style"in t.childNodes[0]&&Boolean(t.childNodes[0].style)&&(o=t.childNodes[0]),t.childNodes[0]&&"A"===t.childNodes[0].nodeName&&(n=g(n.cloneNode(!0),t.childNodes[0].href),o=t.childNodes[0].childNodes[0]),n=y(o,n),n}(e)):"BR"===e.nodeName?n=e:(t=document.createElement("span"),n=v(e));return t?(t.appendChild(n),[t]):[e.cloneNode(!0)]}if(e.childNodes){const t=[];for(let n=0;n<e.childNodes.length;n++)t.push(...E(e.childNodes[n]));return t}return[e]}function C(e){return 8!==e.nodeType}var b=n(25423);const w=/<style>(.*?)<\/style>/gs;var I=n(45761),N=n(59030);const S=new Set([a.CfG,a.e0F,a.YVZ,a.GMW]),x=(e,t,n,m,p,h,g,A)=>{const{showNotification:y}=(0,i.ko)(),v=(0,N.A)();(0,o.vJ)((()=>{if(t)return document.addEventListener("paste",o,!1),()=>{document.removeEventListener("paste",o,!1)};async function o(t){if(!t.clipboardData)return;const o=t.target?.closest("div[contenteditable]");if(!o||!S.has(o.id)||o.id!==e)return;if(t.preventDefault(),document.activeElement!==o)return;const i=t.clipboardData.getData("text"),N=t.clipboardData.getData("text/html");let x=N?(0,c.Ay)(function(e){let t=document.createElement("div");try{e=(n=e).match(u)?function(e){const t=document.createElement("body"),n=e.childNodes,o=Array.from(n).filter(C),i=[];for(const e of o)i.push(...E(e));for(let e=0;e<i.length;e++)t.appendChild(i[e].cloneNode(!0));return t}(f(n.replace(/(\r\n|\n|\r)/,""))).innerHTML:f(n.replace(/(\r\n|\n|\r)/,"")).innerHTML}catch(e){a.Oig&&console.error(e)}var n;t.innerHTML=e.replace(/\u00a0/g," ").replace(w,"");const o=t.querySelectorAll(".text-content");o.length&&(t=o[o.length-1]),Array.from(t.getElementsByTagName("*")).forEach((e=>{if(e instanceof HTMLElement)switch(e.removeAttribute("style"),"BR"===e.tagName&&e.replaceWith("\n"),"P"===e.tagName&&e.appendChild(document.createTextNode("\n")),"IMG"!==e.tagName||e.dataset.entityType||e.replaceWith(e.getAttribute("alt")||""),e.dataset.ignoreOnPaste&&e.remove(),c.qh[e.tagName]&&e.setAttribute("data-entity-type",c.qh[e.tagName]),e.dataset.entityType||e.textContent!==e.innerText||e.replaceWith(e.textContent),e.dataset.alt&&e.setAttribute("alt",e.dataset.alt),e.dataset.entityType){case d.C7.MentionName:e.replaceWith(e.textContent||"");break;case d.C7.CustomEmoji:e.textContent=e.dataset.alt||""}else e.remove()})),(0,b.J)()&&t.querySelectorAll("blockquote").forEach((e=>e.remove()));let i=!0;do{i=!1;for(const e of t.querySelectorAll("blockquote"))for(const t of e.querySelectorAll("blockquote"))i=!0,t.replaceWith(...t.childNodes)}while(i);return t.innerHTML.trimEnd()}(N),void 0,!0):void 0;x&&(0,s.T8)(x)&&g&&(x=(0,s.m4)(x),A?.());const{items:T}=t.clipboardData;let P=[];if(T.length>0&&(P=await(0,I.A)(T),h&&(P=P?.slice(0,1))),!P?.length&&!i)return;const k=x?.entities?.length?x:{text:i};let R=!1;try{R="urn:schemas-microsoft-com:office:word"===(new DOMParser).parseFromString(N,"text/html").documentElement.getAttribute("xmlns:w")}catch(e){}const M=k&&k.text;let L=P?.length&&!R;const U=P?await Promise.all(P.map((e=>(0,l.A)(e.name,e)))):[],j=h&&U?.length&&(0,r.eh$)(h,U[0])||Boolean(M),O=(0,r.NKO)(U[0]),F=h&&h?.groupedId;h&&O?y({message:v(F?"lng_edit_media_album_error":"lng_edit_media_invalid_file")}):!F||(L=j,L)?(L&&m(h?U:e=>e.concat(U)),M&&(L?p(k):n(k,o?.id))):y({message:v("lng_edit_media_album_error")})}}),[n,h,m,t,g,A,p,v])}},3225:(e,t,n)=>{n.d(t,{A:()=>E});var o=n(84051),i=n(13439),a=n(31481),r=n(66644),s=n(98221),c=n(36353),l=n(39074),d=n(82393),u=n(58734),m=n(63988),p=n(83414),h=n(19129),f=n(37661),g=n(17712);const A=300,y=new RegExp(`(${s.A.source})$`,"g"),v=new RegExp(`${a.bpX.source}$`,"g");function E(e,t,n,E,C){const{loadCustomEmojiForEmoji:b,clearCustomEmojiForEmoji:w}=(0,i.ko)(),[I,N,S]=(0,f.A)(!1),x=(0,m.gs)((()=>{const o=t();if(!e||!o||!n()?.collapsed)return;if(!o.match(d.TL?s.A:a.bpX))return;const i=(0,l.LV)(E.current);return i.match(d.TL?y:v)?.[0]}),[t,n,E,e],A),T=(0,p.A)(x,[x,t,n],!0),P=(0,h.A)((()=>Boolean(T())),[T]),k=Boolean(C?.length);(0,o.vJ)((()=>{if(!e||!P)return;const t=T();t?k||b({emoji:d.TL?t:t.match(/.+alt="(.+)"/)?.[1]}):w()}),[e,P,T,k,w,b]);const R=(0,g.A)((t=>{const n=T();if(!e||!n)return;const o=E.current,i=(0,l.LV)(o),a=d.TL?n:n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),s=new RegExp(`(${a})\\1*$`,""),m=i.match(s)[0].length/n.length,p=window.getSelection();for(let e=0;e<m;++e)p.modify("extend","backward","character");document.execCommand("insertHTML",!1,(0,u.hB)(t).repeat(m)),(0,r.Uz)((()=>{(0,c.A)(o,!0,!0)}))}));return(0,o.vJ)(S,[S,t]),{isCustomEmojiTooltipOpen:Boolean(P&&k&&!I),closeCustomEmojiTooltip:N,insertCustomEmoji:R}}},25498:(e,t,n)=>{n.d(t,{A:()=>R});var o=n(84051),i=n(13439),a=n(31481),r=n(66644),s=n(29807),c=n(52491),l=n(36353),d=n(87894),u=n(79824),m=n(37830),p=n(4961),h=n(58734),f=n(17778),g=n(63988),A=n(83414),y=n(37661),v=n(17712);let E,C,b,w,I;const N=36,S=2,x=300,T=(0,m.A)((function(e,t,n){return e&&t.length?Object.values((0,d._E)(e,t)).slice(0,n):u.p})),P=(0,m.A)((function(e,t,n){const o=Object.values(e),i=(0,d.dU)(o,"native"),a=t?(0,d.LG)(t,(e=>Object.values((0,d._E)(i,e)))):{},r=n?(0,d.LG)(n,(e=>Object.values((0,d._E)(i,e)))):{},s={...a,...r},c=[].concat(Object.keys(a),Object.keys(r)),l=o.reduce(((e,t)=>(t.names.forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)})),e)),{}),u=Object.keys(l),m=c.reduce(((e,t)=>Math.max(e,t.length)),0);return{byKeyword:s,keywords:c,byName:l,names:u,maxKeyLength:m}})),k=(0,m.A)((function(e,t,n){const{byKeyword:o,keywords:i,byName:a,names:r,maxKeyLength:s}=e;let c=[];if(t.length>s)return u.p;const l=i.filter((e=>e.startsWith(t))).sort();c=c.concat(Object.values((0,d._E)(o,l)).flat());const m=r.filter((e=>e.startsWith(t)));return c=c.concat(Object.values((0,d._E)(a,m)).flat()),c=(0,d.Am)(c),c.length?c.slice(0,n):u.p}));try{w=/(^|\s):(?!\s)[-+_:'\s\p{L}\p{N}]*$/giu,I=/\p{Ll}/u}catch(e){w=/(^|\s):(?!\s)[-+_:'\s\d\wа-яёґєії]*$/gi,I=/[a-zяёґєії]/}function R(e,t,m=a.CfG,R,M,L){const[U,j,O]=(0,y.A)(!1),[F,B]=(0,o.J0)(),[D,K]=(0,o.J0)(u.p),[H,z]=(0,o.J0)(u.p);(0,o.vJ)((()=>{function t(){B(b.emojis)}e&&(b?t():async function(){return E||(E=n.e(996).then(n.t.bind(n,20996,19)),C=(await E).default,b=(0,c.cp)(C)),E}().then(t))}),[e]);const G=(0,g.gs)((()=>{const n=t();return e&&n.includes(":")?(0,f.S)(n).match(w)?.[0].trim():void 0}),[t,e],x),$=(0,A.A)(G,[G,t],!0),V=(0,v.A)((e=>{if(K(e),e===u.p)return void z(u.p);const t=e.map((e=>e.native)),n=(0,d.Xd)((0,s.oZ0)((0,i.mS)(),t),"id");z(n)})),J=(0,v.A)(((e,n=!1)=>{const o=t();if(!o)return;const i=o.lastIndexOf(":",n?o.lastIndexOf(":")-1:void 0);if(-1!==i){const t="string"==typeof e?(0,p.A)(e,["emoji_html"]).join(""):(0,h.hB)(e),n=window.getSelection();for(let e=0;e<o.length-i;++e)n.modify("extend","backward","character");document.execCommand("insertHTML",!1,t);const s=m===a.CfG?document.querySelector(a.m$5):document.getElementById(m);(0,r.Uz)((()=>{(0,l.A)(s,!0,!0)}))}V(u.p)}));return(0,o.vJ)((()=>{const e=$();if(!e||!F)return void V(u.p);const t=e.length>2&&e.endsWith(":"),n=e.substring(1,t?1+e.length-2:void 0);let o=u.p;if(n){if(1===n.length&&I.test(n)||n.length>=S){const e=P(F,M,L);o=k(e,n.toLowerCase(),N)}}else o=T(F,R,N);o.length?t?J(o[0].native,!0):V(o):V(u.p)}),[M,F,$,L,J,R,V]),(0,o.vJ)(O,[O,t]),{isEmojiTooltipOpen:Boolean(D.length||H.length)&&!U,closeEmojiTooltip:j,filteredEmojis:D,filteredCustomEmojis:H,insertEmoji:J}}},56676:(e,t,n)=>{n.d(t,{J:()=>s});var o=n(84051),i=n(52674),a=n(67054),r=n(17712);function s({isActive:e,isHorizontal:t,shouldSaveSelectionOnUpdateItems:n,shouldRemoveSelectionOnReset:s,noArrowNavigation:c,items:l,shouldSelectOnTab:d,onSelect:u,onClose:m}){const[p,h]=(0,o.J0)(-1),f=(0,r.A)((e=>l?(0,a.A)(l.length,e):-1)),g=(0,r.A)(((e,t)=>{t.preventDefault(),h((t=>f(t+e)))})),A=(0,r.A)((t=>{if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return!1;if(!e)return!1;if(l&&l.length&&p>-1){const e=l[p];if(e){if(!1===u(e))return!1;t.preventDefault()}}return!0}));(0,o.vJ)((()=>{e||h(s?-1:0)}),[e,s]);const y=!l||p>l.length-1;return(0,o.vJ)((()=>{n&&!y||h(s?-1:0)}),[y,s,n]),(0,o.vJ)((()=>e?(0,i.A)({onEsc:m,onUp:c||t?void 0:e=>g(-1,e),onDown:c||t?void 0:e=>g(1,e),onLeft:c||!t?void 0:e=>g(-1,e),onRight:c||!t?void 0:e=>g(1,e),onTab:d?A:void 0,onEnter:A}):void 0),[c,g,A,e,t,m,d]),p}},19381:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(84051),i=n(80089),a=n(80464);const r=e=>{const{isOpen:t}=e,n=(0,a.A)(i.ar.Extra,"ContextMenuContainer",!t);return n?o.Ay.createElement(n,e):void 0}},79519:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(84051),i=n(61433),a=n(31481),r=n(66644),s=n(81954),c=n(60148);const l=500,d=a.nxZ,u=20;function m({elementRef:e,chatId:t,isFocused:n,focusDirection:a,noFocusHighlight:m,isResizingContainer:p,isJustAdded:h,isQuote:f,scrollTargetPosition:g}){const A=(0,o.li)(!h);(0,o.Nf)((()=>{const t=A.current;if(A.current=!1,n&&e.current){const n=e.current.closest(".MessageList"),o=m,h=g||o?"end":"centerOrTop",A=()=>{const t=void 0!==a?o?l:d:void 0;(0,c.V)();const m=(0,s.Ay)({container:n,element:e.current,position:h,margin:u,maxDistance:t,forceDirection:a,forceNormalContainerHeight:p,shouldReturnMutationFn:!0});if(f){const t=e.current.querySelector(".is-quote");t&&(0,r.RK)((()=>{(0,i.YM)(t,"animate")}))}return m};t?(0,r.gm)(A):(0,r.YS)((()=>{(0,r.RK)(A())}))}}),[e,t,n,a,m,p,f,g])}},43581:(e,t,n)=>{n.d(t,{A:()=>K});var o=n(84051),i=n(13439),a=n(90709),r=n(29807),s=n(87357),c=n(60343),l=n(15283),d=n(17712),u=n(59030),m=n(14242),p=n(76023),h=n(63527),f=n(10722),g=n(82117),A=n(29886),y=n(21511),v=n(68292),E=n(26875),C=n(82393),b=n(71851),w=n(5912),I=n(4438),N=n(9267),S=n(93879);const x=1.5*p.$,T=6.5*p.$,P=C.pz||C.Ni?2:5,k=C.pz||C.Ni?2:3,R=(0,o.ph)((0,i.EK)(((e,{containerId:t})=>{const{activeReactions:n}=(0,r.nTw)(e),o=(0,r.xYJ)(e,"reactionEffects");return{activeReactions:n?.[t],withEffects:o}}))((({containerId:e,reaction:t,className:n,size:r=x,effectSize:c=T,activeReactions:l,localAmount:u,withEffects:m,observeIntersection:p})=>{const{stopActiveReaction:h}=(0,i.ko)(),f=(0,o.li)(null),A=(0,o.li)(null),[v,E]=(0,o.J0)([]),C=(0,w.Vz)(f,p),R=(0,o.Kr)((()=>l?.find((e=>(0,a.a0K)(e,t)))),[l,t]),M=Boolean(m&&R),L=v.length<P;(0,g.A)((([e])=>{M?!u||u<=(e||0)||L&&E((e=>[...e,Date.now()])):E([])}),[u,L,M]);const{shouldRender:U}=(0,y.A)({ref:A,noMountTransition:!0,isOpen:M,className:"slow",withShouldRender:!0}),j=(0,d.A)((()=>{const n=v.slice(1);E(n),n.length||h({containerId:e,reaction:t})})),O=(0,s.A)(S.A.root,U&&S.A.animating,n);return o.Ay.createElement("div",{className:O,ref:f,teactFastList:!0},o.Ay.createElement(N.A,{key:"icon",type:"gold",size:"adaptive",style:`width: ${r}px; height: ${r}px`}),U&&v.map((e=>o.Ay.createElement(I.A,{key:e,ref:A,className:S.A.effect,size:c,tgsUrl:b.w.StarReactionEffect,play:C,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:k,onEnded:j}))))})));var M=n(11241),L=n(85118),U=n(64493),j=n(69988);const O=1.25*p.$;function F(e){return e.stars}const B=(0,o.ph)((({reaction:e,containerId:t,isOwnMessage:n,recentReactors:r,className:c,chosenClassName:l,chatId:u,messageId:p,observeIntersection:C,onClick:b,onPaidClick:w})=>{const{openStarsBalanceModal:I,resetLocalPaidReactions:N,openPaidReactionModal:S,requestWave:x}=(0,i.ko)(),T=(0,o.li)(null),P=(0,o.li)(null),k=(0,o.li)(),B="paid"===e.reaction.type,D=(0,h.A)(F),K=Boolean(D),H=(0,d.A)(((e=1)=>{w?.(e)})),z=(0,d.A)((t=>{if("paid"===e.reaction.type)return t.stopPropagation(),void H();b?.(e.reaction)})),{isContextMenuOpen:G,handleBeforeContextMenu:$,handleContextMenu:V,handleContextMenuClose:J,handleContextMenuHide:q}=(0,f.A)(T,"paid"!==e.reaction.type,void 0,void 0,void 0,!0);(0,o.vJ)((()=>{G&&(S({chatId:u,messageId:p}),J(),q())}),[J,q,G,u,p]),(0,g.A)((([t])=>{const n=e.localAmount,o=T.current;if(!n||!o||n===t?.localAmount)return;if(K&&n>D.balance.amount)return I({originReaction:{chatId:u,messageId:p,amount:n}}),void N({chatId:u,messageId:p});if(e.localAmount){const{left:e,top:t}=o.getBoundingClientRect(),n=e+o.offsetWidth/2,i=t+o.offsetHeight/2;x({startX:n,startY:i})}const i=Number(getComputedStyle(o).scale)||1;k.current?.cancel(),k.current=o.animate([{scale:i},{scale:Math.min(1.2*i,3),offset:.2},{scale:1}],{duration:500*i,easing:"ease-out"})}),[e,D?.balance,K,u,p]);const _=(0,A.A)(e.localAmount),{shouldRender:W}=(0,y.A)({isOpen:Boolean(e.localAmount),ref:P,className:"slow",withShouldRender:!0});return o.Ay.createElement(U.A,{className:(0,s.A)(j.A.root,n&&j.A.own,B&&j.A.paid,(0,a.eu8)(e)&&j.A.chosen,(0,a.eu8)(e)&&l,c),size:"tiny",ref:T,onMouseDown:$,onContextMenu:V,onClick:z},"paid"===e.reaction.type?o.Ay.createElement(o.Ay.Fragment,null,o.Ay.createElement(L.A,{preset:"button"}),o.Ay.createElement(R,{className:j.A.animatedEmoji,containerId:t,reaction:e.reaction,size:O,localAmount:e.localAmount,observeIntersection:C}),W&&o.Ay.createElement(v.A,{ref:P,text:`+${(0,m.Vw)(e.localAmount||_)}`,className:j.A.paidCounter})):o.Ay.createElement(M.A,{className:j.A.animatedEmoji,containerId:t,reaction:e.reaction,size:O,observeIntersection:C}),r?.length?o.Ay.createElement(E.A,{size:"mini",peers:r}):o.Ay.createElement(v.A,{text:(0,m.Vw)(e.count+(e.localAmount||0)),className:j.A.counter}))}));var D=n(92915);const K=(0,o.ph)((({message:e,threadId:t,isOutside:n,maxWidth:m,metaChildren:p,observeIntersection:h,noRecentReactors:f,isCurrentUserPremium:g,tags:A})=>{const{toggleReaction:y,addLocalPaidReaction:v,updateMiddleSearch:E,performMiddleSearch:C,openPremiumModal:b,resetLocalPaidReactions:w,showNotification:I}=(0,i.ko)(),N=(0,u.A)(),{results:S,areTags:x,recentReactions:T}=e.reactions,P=Boolean(e.areReactionsPossible&&e.reactions),k=(0,o.Kr)((()=>S.reduce(((e,t)=>e+t.count),0)),[S]),R=(0,o.Kr)((()=>{const e=(0,i.mS)();return T?.reduce(((t,n)=>{const{reaction:o,peerId:i}=n,s=(0,a.Jjj)(o),c=(0,r.PVB)(e,i);if(!c)return t;const l=t[s]||[];return l.push(c),t[s]=l,t}),{})}),[T]),M=(0,o.Kr)((()=>{const t=(0,c.bj)(e);return S.map((e=>{const n=(0,a.Jjj)(e.reaction),o=R?.[n],i=k>3||f,r=x?A?.[n]:void 0;return{reaction:e,reactionKey:n,messageKey:t,recentReactors:i?void 0:o,isChosen:(0,a.eu8)(e),tag:r}}))}),[e,f,R,S,x,A,k]),L=(0,d.A)((n=>{if(x)return g?(E({chatId:e.chatId,threadId:t,update:{savedTag:n}}),void C({chatId:e.chatId,threadId:t})):void b({initialSection:"saved_tags"});y({chatId:e.chatId,messageId:e.id,reaction:n})})),U=(0,o.Kr)((()=>S.find((e=>"paid"===e.reaction.type))?.localAmount||0),[S]),j=(0,d.A)((t=>{v({chatId:e.chatId,messageId:e.id,count:t})}));(0,o.vJ)((()=>{U&&I({localId:(0,c.bj)(e),title:N("StarsSentTitle"),message:N("StarsSentText",U),actionText:N("StarsSentUndo"),cacheBreaker:U.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:e.chatId,messageId:e.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:e.chatId,messageId:e.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})}),[N,e,U]);const O=(0,d.A)((t=>{y({chatId:e.chatId,messageId:e.id,reaction:t})}));return(0,l.A)((()=>()=>{w({chatId:e.chatId,messageId:e.id})})),o.Ay.createElement("div",{className:(0,s.A)("Reactions",n&&"is-outside",P&&"is-service"),style:m?`max-width: ${m}px`:void 0,dir:N.isRtl?"rtl":"ltr"},M.map((({reaction:t,recentReactors:n,messageKey:i,reactionKey:a,isChosen:r,tag:s})=>x?o.Ay.createElement(D.A,{key:a,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,isChosen:r,reaction:t.reaction,tag:s,withContextMenu:g,onClick:L,onRemove:O,observeIntersection:h}):o.Ay.createElement(B,{key:a,chatId:e.chatId,messageId:e.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:e.isOutgoing,recentReactors:n,reaction:t,onClick:L,onPaidClick:j,observeIntersection:h}))),p)}))},92915:(e,t,n)=>{n.d(t,{A:()=>E});var o=n(84051),i=n(13439),a=n(87357),r=n(76023),s=n(10722),c=n(37661),l=n(17712),d=n(59030),u=n(11241),m=n(64493),p=n(40664),h=n(8410);const f=(0,o.ph)((({isOpen:e,title:t,subtitle:n,placeholder:i,submitText:a,maxLength:r,initialValue:s="",onClose:c,onSubmit:u})=>{const f=(0,d.A)(),[g,A]=(0,o.J0)(s),y=(0,l.A)((e=>{A(e.target.value)})),v=(0,l.A)((()=>{u(g)}));return o.Ay.createElement(h.A,{className:"narrow",title:t,isOpen:e,onClose:c,isSlim:!0},Boolean(n)&&o.Ay.createElement("div",{className:"cGrbcqD_"},n),o.Ay.createElement(p.A,{placeholder:i,value:g,onChange:y,maxLength:r,teactExperimentControlled:!0}),o.Ay.createElement("div",{className:"dialog-buttons mt-2"},o.Ay.createElement(m.A,{className:"confirm-dialog-button",onClick:v},a||f("Save")),o.Ay.createElement(m.A,{className:"confirm-dialog-button",isText:!0,onClick:c},f("Cancel"))))}));var g=n(71429),A=n(24433),y=n(69988);const v=1.25*r.$,E=(0,o.ph)((({reaction:e,tag:t,containerId:n,isChosen:r,isOwnMessage:p,className:h,chosenClassName:E,withCount:C,isDisabled:b,withContextMenu:w,observeIntersection:I,onClick:N,onRemove:S})=>{const{editSavedReactionTag:x}=(0,i.ko)(),T=(0,o.li)(null),P=(0,o.li)(null),k=(0,d.A)(),[R,M,L]=(0,c.A)(),{title:U,count:j}=t||{},O=Boolean(U||C&&j),F=(0,l.A)((()=>{N?.(e)})),B=(0,l.A)((()=>{S?.(e)})),D=(0,l.A)((t=>{x({reaction:e,title:t}),L()})),{isContextMenuOpen:K,contextMenuAnchor:H,handleBeforeContextMenu:z,handleContextMenu:G,handleContextMenuClose:$,handleContextMenuHide:V}=(0,s.A)(T,!w,void 0,void 0,void 0,!0),J=(0,l.A)((()=>T.current)),q=(0,l.A)((()=>document.body)),_=(0,l.A)((()=>P.current)),W=(0,l.A)((()=>({withPortal:!0,shouldAvoidNegativePosition:!0})));if(!C||0!==j)return o.Ay.createElement(m.A,{className:(0,a.A)(y.A.root,y.A.tag,p&&y.A.own,r&&y.A.chosen,r&&E,b&&y.A.disabled,h),size:"tiny",onClick:F,onMouseDown:z,onContextMenu:G,ref:T},o.Ay.createElement(u.A,{className:y.A.animatedEmoji,containerId:n,reaction:e,loopLimit:1,size:v,observeIntersection:I}),O&&o.Ay.createElement("span",{className:y.A.tagText},U&&o.Ay.createElement("span",null,U),C&&o.Ay.createElement("span",null,j)),o.Ay.createElement("svg",{className:y.A.tail,width:"15",height:"30",viewBox:"0 0 15 30"},o.Ay.createElement("path",{className:y.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})),w&&o.Ay.createElement(f,{isOpen:R,maxLength:15,title:k(t?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:k("SavedTagLabelTagText"),placeholder:k("SavedTagLabelPlaceholder"),initialValue:t?.title,onClose:L,onSubmit:D}),w&&H&&o.Ay.createElement(g.A,{ref:P,isOpen:K,anchor:H,getTriggerElement:J,getRootElement:q,getMenuElement:_,getLayout:W,autoClose:!0,withPortal:!0,onClose:$,onCloseAnimationEnd:V},o.Ay.createElement(A.A,{icon:"tag-filter",onClick:F},k("SavedTagFilterByTag")),o.Ay.createElement(A.A,{icon:"tag-name",onClick:M},k(t?.title?"SavedTagRenameTag":"SavedTagLabelTag")),o.Ay.createElement(A.A,{icon:"tag-crossed",destructive:!0,onClick:B},k("SavedTagRemoveTag"))))}))},86046:(e,t,n)=>{n.d(t,{D5:()=>u,HT:()=>r,M6:()=>d,Pc:()=>s,ZF:()=>l,hk:()=>c,j6:()=>m,jA:()=>a});var o=n(5930),i=n(29807);function a(e,t){if("slug"===t.type)return t;if("stargift"===t.type){const{peerId:n,shouldHideName:o,giftId:a,message:r,shouldUpgrade:s}=t,c=(0,i.PVB)(e,n);if(!c)return;return{type:"stargift",peer:c,shouldHideName:o,giftId:a,message:r,shouldUpgrade:s}}if("starsgift"===t.type){const{userId:n,stars:o,amount:a,currency:r}=t,s=(0,i.mBe)(e,n);if(!s)return;return{type:"stars",purpose:{type:"starsgift",user:s,stars:o,amount:a,currency:r}}}if("stars"===t.type){const{stars:e,amount:n,currency:o}=t;return{type:"stars",purpose:{type:"stars",stars:e,amount:n,currency:o}}}if("chatInviteSubscription"===t.type){const{hash:e}=t;return{type:"chatInviteSubscription",hash:e}}if("message"===t.type){const n=(0,i.hds)(e,t.chatId);if(!n)return;return{type:"message",chat:n,messageId:t.messageId}}if("giftcode"===t.type){const{userIds:n,boostChannelId:o,amount:a,currency:r,option:s,message:c}=t;return{type:"giveaway",option:s,purpose:{type:"giftcode",amount:a,currency:r,users:n.map((t=>(0,i.mBe)(e,t))).filter(Boolean),boostChannel:o?(0,i.hds)(e,o):void 0,message:c}}}if("starsgiveaway"===t.type){const{chatId:n,additionalChannelIds:o,amount:a,currency:r,untilDate:s,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:m,users:p}=t,h=(0,i.hds)(e,n);if(!h)return;const f=o?.map((t=>(0,i.hds)(e,t))).filter(Boolean);return{type:"starsgiveaway",purpose:{type:"starsgiveaway",amount:a,currency:r,chat:h,additionalChannels:f,untilDate:s,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:m,users:p}}}if("giveaway"===t.type){const{chatId:n,additionalChannelIds:o,amount:a,currency:r,option:s,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:m}=t,p=(0,i.hds)(e,n);if(!p)return;const h=o?.map((t=>(0,i.hds)(e,t))).filter(Boolean);return{type:"giveaway",option:s,purpose:{type:"giveaway",amount:a,currency:r,chat:p,additionalChannels:h,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:m}}}if("stargiftUpgrade"===t.type){const{inputSavedGift:n,shouldKeepOriginalDetails:o}=t,i=r(e,n);if(!i)return;return{type:"stargiftUpgrade",inputSavedGift:i,shouldKeepOriginalDetails:o}}}function r(e,t){if("user"===t.type)return t;if("chat"===t.type){const n=(0,i.hds)(e,t.chatId);if(!n)return;return{type:"chat",chat:n,savedId:t.savedId}}}function s(e){return"appStore"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.AppleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.AppleTopUp.Subtitle",peerColorId:5}:"playMarket"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.GoogleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.GoogleTopUp.Subtitle",peerColorId:3}:"fragment"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.FragmentTopUp.Title",subtitleKey:"Stars.Intro.Transaction.FragmentTopUp.Subtitle",customPeerAvatarColor:"#000000"}:"premiumBot"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Title",subtitleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Subtitle",peerColorId:1,withPremiumGradient:!0}:"ads"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramAds.Title",subtitleKey:"Stars.Intro.Transaction.TelegramAds.Subtitle",peerColorId:2}:"api"===e.type?{avatarIcon:"bots",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramBotApi.Title",subtitleKey:"Stars.Intro.Transaction.TelegramBotApi.Subtitle",peerColorId:4}:{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.Unsupported.Title",subtitleKey:"Stars.Intro.Transaction.Unsupported.Title",peerColorId:0}}function c(e,t){const n=t.amount+t.nanos/1e9;return n<0?`- ${e.number(Math.abs(n))}`:`+ ${e.number(n)}`}function l(e,t){return e.number(t.amount+t.nanos/1e9)}function d(e){const{action:t}=e.content;if("giftStars"!==t?.type)return;const{transactionId:n,stars:o}=t;return{id:n,stars:{amount:o,nanos:0},peer:{type:"peer",id:e.isOutgoing?e.chatId:e.senderId||e.chatId},date:e.date,isGift:!0,isMyGift:e.isOutgoing||void 0}}function u(e){const{action:t}=e.content;if("prizeStars"!==t?.type)return;const{transactionId:n,stars:o,targetChatId:i}=t;return{id:n,stars:{amount:o,nanos:0},peer:{type:"peer",id:i},date:e.date,giveawayPostId:e.id}}function m(e,t){return(0,o.A)(e,t)}},70636:(e,t,n)=>{n.d(t,{cy:()=>r,mO:()=>a,vj:()=>i});var o=n(31481);function i(e){return"title"in e}function a(e){return!i(e)}function r(e){return i(e)?"chatTypeBasicGroup"===e.type||"chatTypeSuperGroup"===e.type?"ChatList.PeerTypeGroup":"chatTypeChannel"===e.type?"ChatList.PeerTypeChannel":"chatTypePrivate"===e.type?"ChatList.PeerTypeNonContact":void 0:e.id===o.zv8?"ServiceNotifications":e.isSupport?"SupportStatus":e.type&&"userTypeBot"===e.type?"ChatList.PeerTypeBot":e.isContact?"ChatList.PeerTypeContact":"ChatList.PeerTypeNonContactUser"}},14737:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(17712);const a=function(e,t){const n=(0,i.A)(e);(0,o.vJ)((()=>{if("number"!=typeof t)return;const e=setTimeout((()=>n()),t);return()=>clearTimeout(e)}),[t])}},63988:(e,t,n)=>{n.d(t,{D7:()=>l,aG:()=>s,gs:()=>r,tF:()=>c});var o=n(16581),i=n(83414),a=n(672);function r(e,t,n,o=!1){return(0,a.A)((t=>{t(e())}),t,n,o)}function s(e,t,n=!1){const o=r((()=>e()),[e],t,n);return(0,i.A)(o,[o,e],!0)}function c(e,t,n,i=!1,a=!1){return(0,o.A)((t=>{t(e())}),t,n,i,a)}function l(e,t,n=!1,o=!1){const a=c((()=>e()),[e],t,n,o);return(0,i.A)(a,[a,e],!0)}},45470:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(84051),i=n(32610),a=n(66644),r=n(82393),s=n(35297);const c=2,l=2;function d(e,t=!1,n,d=c,u,m){const p=(0,o.li)(null),h=(0,o.li)();return(0,s.A)((()=>{t||(h.current=!1)}),[e,t]),(0,o.vJ)((()=>{const o=p.current;if(!e||!o||t||h.current)return;h.current=!0;const s=new Image,c=()=>{const e=u||s.width,t=m||s.height,n=o.getContext("2d",{alpha:!1});(0,a.RK)((()=>{o.width=e,o.height=t,r.QH&&(n.filter=`blur(${d}px)`),n.drawImage(s,2*-d,2*-d,e+4*d,t+4*d),r.QH||(0,i.A)(n,0,0,e,t,d,l)}))};s.onload=()=>{n?(0,a.YS)(c):c()},s.src=e}),[e,t,m,u,d,n]),p}},49746:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(84051),i=n(13439);function a(e,t,n,a,r){const{loadMessage:s}=(0,i.ko)();(0,o.vJ)((()=>{r||t&&!n&&s({chatId:e,messageId:t,replyOriginForId:a})}),[r,e,n,t,a])}},41316:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e){const[t,n]=(0,o.Ul)();return(0,o.vJ)((()=>{function t(){const t=window.getSelection();if(!t?.rangeCount)return;const o=t.getRangeAt(0);if(!o)return;if(!document.querySelector(e))return;const{commonAncestorContainer:i}=o;(i instanceof Element?i:i.parentElement).closest(e)&&n(o)}return document.addEventListener("selectionchange",t),()=>document.removeEventListener("selectionchange",t)}),[e,n]),t}},36838:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);const i=(e,t,n=!1)=>{(0,o.vJ)((()=>{if(t)return;const o=e.current;function i(e){e.deltaX||(o.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return o.addEventListener("wheel",i,{passive:!n}),()=>{o.removeEventListener("wheel",i)}}),[e,t,n])}},23565:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(84051),i=n(30857),a=n(73767),r=n(35297);function s(e,t){const n=(0,a.A)(e,!0),s=(0,o.li)(),c=(0,i.A)(),l=null!=e,d=null!=n;return l&&s.current&&(clearTimeout(s.current),s.current=void 0),(0,r.A)((()=>{t&&!l&&d&&!s.current&&(s.current=window.setTimeout((()=>{s.current=void 0,c()}),t))}),[t,c,l,d]),s.current&&t&&!l?n:e}},29886:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(84051);function i(e){const t=(0,o.li)(),n=(0,o.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},14622:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(84051),i=n(13439),a=n(81954),r=n(17712),s=n(93545),c=n(672);const l=function(e,t=!1){const{focusLastMessage:n}=(0,i.ko)(),l=(0,o.li)(0),d=(0,r.A)((e=>{const t=l.current,i=e.contentRect.height;if(l.current=i,(0,a.o8)()||!t||i<=t)return;const r=e.target.closest(".MessageList");if(!r)return;(0,o.VK)(400);const s=i-t,{offsetHeight:c,scrollHeight:d,scrollTop:u}=r;Math.round(d-u-c)-s<=5&&n()})),u=(0,c.A)(d,[d],300,!1);(0,s.A)(e,u,!t)}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(13439),i=n(66644),a=n(29807),r=n(19822);const s=300,c=new Map;function l(e,t,n=s){(0,a.PKK)((0,o.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:u,scrollWidth:m,dataset:{scrollId:p}}=e;let h=t-d;if(h<0){const e=-d*(l?-1:1);h=Math.max(h,e)}else if(h>0){const e=m-(d+u);h=Math.min(h,e)}if(0===h)return Promise.resolve();p&&c.has(p)&&c.get(p)();const f=d+h;return new Promise((t=>{(0,i.RK)((()=>{if(0===n)return e.scrollLeft=f,void t();let o=!1;const a=Math.random().toString();e.dataset.scrollId=a,c.set(a,(()=>{o=!0})),e.style.scrollSnapType="none";const s=Date.now();(0,r.i0)((()=>{if(o)return!1;const i=Math.min((Date.now()-s)/n,1),r=h*(1-function(e){return 1-(1-e)**3.5}(i));return e.scrollLeft=Math.round(f-r),i>=1&&(e.style.scrollSnapType="",delete e.dataset.scrollId,c.delete(a),t()),i<1}),i.RK)}))}))}},81954:(e,t,n)=>{n.d(t,{Ay:()=>f,H$:()=>v,_v:()=>g,o8:()=>y});var o=n(84051),i=n(13439),a=n(89925),r=n(31481),s=n(66644),c=n(29807),l=n(16460),d=n(19822),u=n(82393);let m,p,h=!1;function f(e){m=e;const t=A(e);if(e.shouldReturnMutationFn)return t;(0,s.RK)(t)}function g(){h&&((0,d.vk)(),(0,s.YS)((()=>{(0,s.RK)(A(m))})))}function A(e){const{container:t,element:n,position:f,margin:g=0,maxDistance:A=r.nxZ,forceDirection:y,forceNormalContainerHeight:v}=e;let b=e.forceDuration;y!==a.CC.Static&&(0,c.PKK)((0,i.mS)())||(b=0);const{offsetHeight:w}=n,{scrollTop:I,offsetHeight:N,scrollHeight:S}=t,x=(0,l.A)(n,t).top,T=v&&t.dataset.normalHeight?Number(t.dataset.normalHeight):N;let P;switch(f){case"start":P=x-g+(u.Ni?1:0);break;case"end":P=x+w+g-T;break;case"nearest":case"center":case"centerOrTop":P=w<T?x+w/2-T/2:x-g}const k=function(e,t,n=r.nxZ,o){const{scrollTop:i}=e;if(void 0===o){const e=t-i;if(e<-n)return i+(e+n);if(e>n)return i+(e-n)}else{if(o===a.CC.Up)return t+n;if(o===a.CC.Down)return Math.max(0,t-n)}return i}(t,P,A,y);let R=P-k;if(R<0){const e=-k;R=Math.max(R,e)}else if(R>0){const e=S-(k+T);R=Math.min(R,e)}const M=Math.abs(R);return()=>{if(M<1)return void(I!==k&&(t.scrollTop=k));const e=k+R;if(0===b)return void(t.scrollTop=e);const n=M<=r.s8T?E:C,i=b||r.SKD+M/r.nxZ*(r.OzO-r.SKD),a=Date.now();h=!0;const c=p;p=(0,o.VK)(void 0,!0),c?.(),(0,d.S0)((()=>{const o=Math.min((Date.now()-a)/i,1),r=R*(1-n(o)),s=Math.round(e-r);return t.scrollTop=s,h=o<1&&s!==e,h||(m=void 0,p?.(),p=void 0),h}),s.RK)}}function y(){return h}function v(){p(),p=void 0}function E(e){return 1-(1-e)**3.5}function C(e){return 1-(1-e)**6}},48894:(e,t,n)=>{n.d(t,{Bz:()=>u,LS:()=>l,Yi:()=>d,Zf:()=>s,bM:()=>r,rX:()=>c,v2:()=>a,vG:()=>m,xp:()=>i});var o=n(87679);function i(e){return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function a(e){const t=e[0].toString(16),n=e[1].toString(16),o=e[2].toString(16);return(1==t.length?"0"+t:t)+(1==n.length?"0"+n:n)+(1==o.length?"0"+o:o)}function r([e,t,n]){e/=255,t/=255,n/=255;let o,i,a=Math.max(e,t,n),r=Math.min(e,t,n),s=a,c=a-r;if(i=0==a?0:c/a,a==r)o=0;else{switch(a){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return[o,i,s]}function s([e,t,n]){let o,i,a,r=Math.floor(6*e),s=6*e-r,c=n*(1-t),l=n*(1-s*t),d=n*(1-(1-s)*t);switch(r%6){case 0:o=n,i=d,a=c;break;case 1:o=l,i=n,a=c;break;case 2:o=c,i=n,a=d;break;case 3:o=c,i=l,a=n;break;case 4:o=d,i=c,a=n;break;case 5:o=n,i=c,a=l}return[Math.round(255*o),Math.round(255*i),Math.round(255*a)]}async function c(e){const t=[0,0,0];let n,i,a,r,s=-4,c=[0,0,0],l=0;const d=document.createElement("canvas"),u=d.getContext&&d.getContext("2d");if(!u)return t;const m=await(0,o.NN)(e);a=m.naturalHeight||m.offsetHeight||m.height,i=m.naturalWidth||m.offsetWidth||m.width,d.height=a,d.width=i,u.drawImage(m,0,0);try{n=u.getImageData(0,0,i,a)}catch(e){return t}for(r=n.data.length;(s+=20)<r;)0!==n.data[s+3]&&(++l,c[0]+=n.data[s],c[1]+=n.data[s+1],c[2]+=n.data[s+2]);return c[0]=Math.floor(c[0]/l),c[1]=Math.floor(c[1]/l),c[2]=Math.floor(c[2]/l),c}function l(e){const[t,n,o]=e;return.2126*t+.7152*n+.0722*o}function d(e){let[t,n,o]=r(e);return n=Math.min(1,n+.05+.1*(1-n)),o=o>.5?Math.max(0,.65*o):Math.max(0,Math.min(1,1-.65*o)),`hsla(${360*t}, ${100*n}%, ${100*o}%, .4)`}const u=e=>`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${(e>>24&255)/255})`,m=e=>l([e>>16&255,e>>8&255,255&e])>128?"black":"white"},67054:(e,t,n)=>{function o(e,t){return t-Math.floor(t/e)*e}n.d(t,{A:()=>o})},73728:(e,t,n)=>{function o(e,t,n=0,o=!1,i=!1,a=!1){const r=e[a?"scrollLeft":"scrollTop"],s=r+e[a?"offsetWidth":"offsetHeight"],c="string"==typeof t?e.querySelectorAll(t):t,{length:l}=c,d=[];let u=!1;for(let e=0;e<l;e++){const t=c[e],l=t[a?"offsetLeft":"offsetTop"],m=l+t[a?"offsetWidth":"offsetHeight"];if(i?m>=r-n&&m<=s+n:l<=s+n&&m>=r-n)d.push(e),u=!0;else if(u&&!o)break}return{allElements:c,visibleIndexes:d}}n.d(t,{A:()=>o})},36353:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(82393);function i(e,t,n){if(!t&&e===document.activeElement)return;const i=window.getSelection(),a=document.createRange(),r=e.lastChild||e;o.TF||n||r&&r.nodeValue?(a.selectNodeContents(n?e:r),a.collapse(!1),i.removeAllRanges(),i.addRange(a)):e.focus()}},24909:(e,t,n)=>{n.d(t,{s:()=>a,y:()=>r});var o=n(48894);const i=240;function a(e,t,n="image/png"){const o=e instanceof Blob?URL.createObjectURL(e):e,i=new Image;return new Promise((a=>{i.onload=()=>{s(i,i.width*t,i.height*t,n).then((e=>{if(!e)throw new Error("Image resize failed!");return URL.createObjectURL(e)})).then(a).finally((()=>{e instanceof Blob&&URL.revokeObjectURL(o)}))},i.src=o}))}function r(e,t,n,o="image/png"){const i=e instanceof Blob?URL.createObjectURL(e):e,a=new Image;return new Promise((r=>{a.onload=()=>{s(a,t,n,o).then((e=>{if(!e)throw new Error("Image resize failed!");return URL.createObjectURL(e)})).then(r).finally((()=>{e instanceof Blob&&URL.revokeObjectURL(i)}))},a.src=i}))}async function s(e,t,n,a="image/png"){if(!("createImageBitmap"in window))return c(e,t,n,void 0,a);try{const r=await window.createImageBitmap(e,{resizeWidth:t,resizeHeight:n,resizeQuality:"high"});if(r.height!==n||r.width!==t)throw new Error("Image bitmap resize not supported!");const s=await(0,o.rX)(e.src),c=(0,o.LS)(s)<i?"#fff":"#000";return await new Promise((e=>{const t=document.createElement("canvas");t.width=r.width,t.height=r.height;const n=t.getContext("2d");n.fillStyle=c,n.fillRect(0,0,t.width,t.height);const o=t.getContext("bitmaprenderer");o?o.transferFromImageBitmap(r):n.drawImage(r,0,0),t.toBlob(e,a)}))}catch(o){return c(e,t,n,void 0,a)}}async function c(e,t,n,a=.5,r="image/png"){const s=document.createElement("canvas"),c=s.getContext("2d"),l=document.createElement("canvas"),d=l.getContext("2d");if(s.width=t,s.height=n,e.width*a>t){const n=1/a;let o={width:Math.floor(e.width*a),height:Math.floor(e.height*a)};for(l.width=o.width,l.height=o.height,d.drawImage(e,0,0,o.width,o.height);o.width*a>t;)o={width:Math.floor(o.width*a),height:Math.floor(o.height*a)},d.drawImage(l,0,0,o.width*n,o.height*n,0,0,o.width,o.height);c.drawImage(l,0,0,o.width,o.height,0,0,s.width,s.height)}else c.drawImage(e,0,0,s.width,s.height);const u=await(0,o.rX)(e.src),m=(0,o.LS)(u)<i?"#fff":"#000";return c.fillStyle=m,c.globalCompositeOperation="destination-over",c.fillRect(0,0,s.width,s.height),new Promise((e=>{s.toBlob(e,r)}))}},37830:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(87894);const i=new WeakMap;function a(e){return(...t)=>{const n=i.get(e);if(n&&(0,o.k)(n.lastArgs,t))return n.lastResult;const a=e(...t);return i.set(e,{lastArgs:t,lastResult:a}),a}}},58968:(e,t,n)=>{n.d(t,{I5:()=>r,LS:()=>a,V2:()=>i,lw:()=>o});const o={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},i=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],a=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],r={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},32669:(e,t,n)=>{n.d(t,{qh:()=>u,Ay:()=>p,g4:()=>h});var o=n(23174),i=n(31481);function a(e,t,n){n=n?` ${n}`:"";let o="";for(const i of e)switch(i.type){case"openingTag":o+=`<${t}${n}>`;break;case"text":o+=i.text;break;case"closingTag":o+=`</${t}>`}return o}const r="`";function s(e){const t=new Array,n=e.split("\n");for(let e=0;e<n.length;++e){let o=n[e];const i=e!==n.length-1;for(;o.includes(r);){const e=o.indexOf(r),n=o.indexOf(r,e+1);if(-1===n)break;0===e?(t.push({type:"openingTag"}),t.push({type:"text",text:o.slice(1,n)}),t.push({type:"closingTag"}),o=o.slice(n+1)):(t.push({type:"text",text:o.slice(0,e)}),o=o.slice(e))}o&&t.push({type:"text",text:o}),i&&t.push({type:"text",text:"\n"})}return a(t,"code")}function c(e,t,n,o){const i=new Array,r=e.split("\n");let s=!0;for(let e=0;e<r.length;++e){let n=r[e];const o=e!==r.length-1;if(s){for(;n.includes(t);){const e=n.indexOf(t),o=n.indexOf(t,e+t.length);if(-1===o)break;0===e?(i.push({type:"openingTag"}),i.push({type:"text",text:n.slice(t.length,o)}),i.push({type:"closingTag"}),n=n.slice(o+t.length)):(i.push({type:"text",text:n.slice(0,e)}),n=n.slice(e))}if(!n&&o){i.push({type:"text",text:"\n"});continue}}if(!n)continue;const a=n.indexOf(t);-1!==a?(0!==a&&i.push({type:"text",text:n.slice(0,a)}),n=n.slice(a),s?(i.push({type:"openingTag"}),s=!1):(i.push({type:"closingTag"}),s=!0),o&&i.push({type:"text",text:"\n"})):(i.push({type:"text",text:n}),o&&i.push({type:"text",text:"\n"}))}const c=new Array;for(const e of i)"openingTag"===e.type?c.push(e):"closingTag"===e.type&&c.pop();for(const e of c)e.type="text",e.text=t;return a(i,n,o)}const l="```";var d=n(82393);const u={B:o.C7.Bold,STRONG:o.C7.Bold,I:o.C7.Italic,EM:o.C7.Italic,INS:o.C7.Underline,U:o.C7.Underline,S:o.C7.Strike,STRIKE:o.C7.Strike,DEL:o.C7.Strike,CODE:o.C7.Code,PRE:o.C7.Pre,BLOCKQUOTE:o.C7.Blockquote},m=3;function p(e,t=!1,n=!1){const a=document.createElement("div");a.innerHTML=n?e:function(e){let t=e.slice(0);t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=function(e){const t=new Array,n=e.split("\n");let o=!0;for(let e=0;e<n.length;++e){let i=n[e];const a=e!==n.length-1,r=i.indexOf(l);if(-1!==r){if(0!==r&&t.push({type:"text",text:i.slice(0,r)}),i=i.slice(r),o){const e=i.slice(l.length);if(e&&e.endsWith(l)){t.push({type:"openingTag"}),t.push({type:"text",text:e.slice(0,e.length-l.length)}),t.push({type:"closingTag"}),a&&t.push({type:"text",text:"\n"});continue}t.push({type:"openingTag",language:e}),o=!1}else t.push({type:"closingTag"}),o=!0;a&&t.push({type:"text",text:"\n"})}else t.push({type:"text",text:i}),a&&t.push({type:"text",text:"\n"})}const i=new Array;for(const e of t)"openingTag"===e.type?i.push(e):"closingTag"===e.type&&i.pop();for(const e of i)e.type="text",e.text=l+(e.language??""),delete e.language;let a="";for(const e of t)switch(e.type){case"openingTag":{let t=e.language;t&&(t=t.replaceAll('"','\\"'),t=` data-language="${e.language}"`),a+=`<pre${t}>`;break}case"text":a+=e.text;break;case"closingTag":a+="</pre>"}return a}(t);const n=(new DOMParser).parseFromString(t,"text/html").body;{const e=n.childNodes;for(const t of e)t instanceof Text&&t.replaceWith(document.createRange().createContextualFragment(s(t.data)))}d.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">');const i=n.childNodes;for(let e=0;e<i.length;++e){const t=i[e],n=i[e+1];t instanceof Text&&(n&&n instanceof Text&&(t.data+=n.data,n.data="",++e),t.replaceWith(document.createRange().createContextualFragment((a=c(a=t.data,"**","b"),a=c(a,"__","i"),a=c(a,"~~","s"),a=c(a,"||","span",`data-entity-type="${o.C7.Spoiler}"`)))))}var a;return n.innerHTML}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${i.kNZ}+?)\\)`,"g"),((e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`))}(e):e),h(a);const r=a.innerText.trim().replace(/\u200b+/g,"");let p=-a.innerText.indexOf(r[0]),f=0;const g=[];function A(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const i=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(u[e.nodeName])return u[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===o.C7.MentionName?o.C7.MentionName:t.dataset.entityType===o.C7.Url?o.C7.Url:t.href.startsWith("mailto:")?o.C7.Email:t.href.startsWith("tel:")?o.C7.Phone:t.href!==t.textContent?o.C7.TextUrl:o.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?o.C7.CustomEmoji:void 0}(e);if(!i||!e.textContent)return{index:n,entity:void 0};const a=t.indexOf(e.textContent,n),r=a>=0?a:n,s=t.substring(0,r).length,{length:c}=t.substring(r,r+e.textContent.length);return i===o.C7.TextUrl?{index:r,entity:{type:i,offset:s,length:c,url:e.href}}:i===o.C7.MentionName?{index:r,entity:{type:i,offset:s,length:c,userId:e.dataset.userId}}:i===o.C7.Pre?{index:r,entity:{type:i,offset:s,length:c,language:e.dataset.language}}:i===o.C7.CustomEmoji?{index:r,entity:{type:i,offset:s,length:c,documentId:e.dataset.documentId}}:i===o.C7.Blockquote?{index:r,entity:{type:i,offset:s,length:c,canCollapse:"1"===e.dataset.collapsed}}:{index:r,entity:{type:i,offset:s,length:c}}}(e,r,p);if(n)p=t,g.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;p+=e.textContent.length}e.hasChildNodes()&&f<=m&&(f+=1,Array.from(e.childNodes).forEach(A))}return Array.from(a.childNodes).forEach((e=>{f=1,A(e)})),{text:r,entities:g.length?g:void 0}}function h(e){e.querySelectorAll("img").forEach((e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")}))}},39074:(e,t,n)=>{n.d(t,{DY:()=>s,JC:()=>a,LV:()=>i,vZ:()=>r});const o=document.createElement("div");function i(e,t){if(!e)return"";const n=window.getSelection();if(!n||!n.rangeCount)return e.innerHTML;const i=n.getRangeAt(0).cloneRange();return i.intersectsNode(e)?t||e.contains(i.commonAncestorContainer)?(i.collapse(!0),i.setStart(e,0),o.innerHTML="",o.appendChild(i.cloneContents()),o.innerHTML):"":e.innerHTML}function a(e){let t=0;const n=window.getSelection();if(!n||0===n.rangeCount)return t;const o=n.getRangeAt(0),i=o.cloneRange();return i.selectNodeContents(e),i.setEnd(o.endContainer,o.endOffset),t=i.toString().length,t}function r(e,t){for(const n of e.childNodes)if(n.nodeType===Node.TEXT_NODE){if(n.length>=t){const e=document.createRange(),o=window.getSelection();return e.setStart(n,t),e.collapse(!0),o.removeAllRanges(),o.addRange(e),-1}t-="length"in n?n.length:0}else if(-1===(t=r(n,t)))return-1;return t}function s(){const e=window.getSelection();e?.removeAllRanges()}},16460:(e,t,n)=>{function o(e,t){let n=0,o=0,i=e;for(;i&&i!==t&&!i.contains(t);)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;return{top:n,left:o}}n.d(t,{A:()=>o})},32555:(e,t,n)=>{function o(e,t,n=!1){const o=e[n?"scrollLeft":"scrollTop"],i=o+e[n?"offsetWidth":"offsetHeight"],a=t[n?"offsetLeft":"offsetTop"],r=a+t[n?"offsetWidth":"offsetHeight"];return a>o&&r<i}n.d(t,{A:()=>o})},31722:(e,t,n)=>{n.d(t,{A:()=>o});const o={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},93879:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},69988:(e,t,n)=>{n.d(t,{A:()=>o});const o={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}}}]);
//# sourceMappingURL=5806.28b839671e35c91f6319.js.map